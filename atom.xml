<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>微波炉 de Blogs</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://weibolu.online/"/>
  <updated>2019-04-24T03:11:40.925Z</updated>
  <id>https://weibolu.online/</id>
  
  <author>
    <name>Wei Bolu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>字符串处理3 —— AC自动机</title>
    <link href="https://weibolu.online/2019/04/24/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%863%20%E2%80%94%E2%80%94%20AC%E8%87%AA%E5%8A%A8%E6%9C%BA%20/"/>
    <id>https://weibolu.online/2019/04/24/字符串处理3 —— AC自动机 /</id>
    <published>2019-04-24T03:46:28.000Z</published>
    <updated>2019-04-24T03:11:40.925Z</updated>
    
    <content type="html"><![CDATA[<h2 id="转载"><a href="#转载" class="headerlink" title="转载"></a>转载</h2><p><a href="https://www.cnblogs.com/wenzhixin/p/9448045.html" target="_blank" rel="noopener">AC自动机总结</a></p><h2 id="hint"><a href="#hint" class="headerlink" title="hint"></a>hint</h2><p>终于学到了AC自动机了，终于可以自动AC了，再也不用自己打代码了（￣︶￣）↗　<br>当然不是这样啦！AC自动机的本质其实是有限状态自动机，没有学计算理论前我还真不知道这玩意是啥。<br>其实说白了就是状态有限，根据输入不同有不同的处理的一个理论计算机器。</p><p>而AC自动机其实是对KMP算法的补充，KMP算法只能对一个匹配串处理，多个匹配串就无法优化啦。<br><a href="https://weibolu.online/2019/04/16/kmp%E7%AE%97%E6%B3%95/">不记得KMP了可以看看这个</a></p><p>而AC自动机其实就是把KMP算法中的next数组的思想同时用到了Trie的多条路径上了，保证你在当前匹配失败后可以直接通过fail指针找到一个新的可匹配状态（或回到根节点）</p><p>整体来看AC自动机的构造其实就是Trie的构造过程，比它多的就是Fail指针的构造。</p><h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><h3 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxw = <span class="number">10010</span>;      <span class="comment">//最大单词数 </span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxwl = <span class="number">61</span>;        <span class="comment">//最大单词长度 </span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxl = <span class="number">1001000</span>;    <span class="comment">//最大文本长度 </span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> sigm_size = <span class="number">26</span>;    <span class="comment">//字符集大小 </span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> sum;<span class="comment">//&gt;0表示以该结点为前缀的单词个数，=0表示不是单词结点，=-1表示已经经过计数 </span></span><br><span class="line">    Node* chld[sigm_size];</span><br><span class="line">    Node* fail;</span><br><span class="line">    Node() &#123;</span><br><span class="line">        sum = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(chld, <span class="number">0</span>, <span class="keyword">sizeof</span>(chld));</span><br><span class="line">        fail = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ac_automaton</span> &#123;</span></span><br><span class="line">    Node* root;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        root = <span class="keyword">new</span> Node;</span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">idx</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> c - <span class="string">'a'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span> *s)</span> </span>&#123;</span><br><span class="line">        Node* u = root; </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s[i]; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> c = idx(s[i]);</span><br><span class="line">            <span class="keyword">if</span>(u-&gt;chld[c] == <span class="literal">NULL</span>) </span><br><span class="line">                u-&gt;chld[c] = <span class="keyword">new</span> Node;</span><br><span class="line">            </span><br><span class="line">            u = u-&gt;chld[c];</span><br><span class="line">        &#125;</span><br><span class="line">        u-&gt;sum++;<span class="comment">//以该串为前缀的单词个数++ </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getfail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">queue</span>&lt;Node*&gt; q;</span><br><span class="line">        q.push(root);<span class="comment">//根结点的fail指针为空 </span></span><br><span class="line">        <span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">            Node* u = q.front();</span><br><span class="line">            q.pop();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sigm_size; i++) &#123;                <span class="comment">//寻找当前结点的所有非空子结点的fail指针 </span></span><br><span class="line">                <span class="keyword">if</span>(u-&gt;chld[i] != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(u == root)<span class="comment">//根结点 </span></span><br><span class="line">                        u-&gt;chld[i]-&gt;fail = root;</span><br><span class="line">                    <span class="keyword">else</span> &#123;       <span class="comment">//非根节点 </span></span><br><span class="line">                        Node* tmp = u-&gt;fail;                    <span class="comment">//找到它父亲的fail指针指向的结点 </span></span><br><span class="line">                        <span class="keyword">while</span>(tmp != <span class="literal">NULL</span>) &#123;                    <span class="comment">//向上只有根结点的fail指针是空，所以只要不是根结点就循环 </span></span><br><span class="line">                            <span class="keyword">if</span>(tmp-&gt;chld[i] != <span class="literal">NULL</span>) &#123;          <span class="comment">//直到发现存在一个结点的子结点与其相同 </span></span><br><span class="line">                                u-&gt;chld[i]-&gt;fail = tmp-&gt;chld[i];<span class="comment">//就将它的fail指针指向该子结点然后结束循环 </span></span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            tmp = tmp-&gt;fail;<span class="comment">//否则一直往上找 </span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(tmp == <span class="literal">NULL</span>)     <span class="comment">//如果寻找到根结点还没有找到，就指向根结点，让主串从根结点重新开始匹配 </span></span><br><span class="line">                            u-&gt;chld[i]-&gt;fail = root;</span><br><span class="line">                    &#125;</span><br><span class="line">                    q.push(u-&gt;chld[i]);     <span class="comment">//子结点入队 </span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">char</span> *t)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;<span class="comment">//文本中存在单词的个数 </span></span><br><span class="line">        Node* u = root; </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; t[i]; i++) &#123;<span class="comment">//yasherhs </span></span><br><span class="line">            <span class="keyword">int</span> c = idx(t[i]);</span><br><span class="line">            <span class="keyword">while</span>(u != root &amp;&amp; u-&gt;chld[c] == <span class="literal">NULL</span>)<span class="comment">//不是根结点而且不匹配，顺着fail指针走，直到可以匹配或者走到根结点 </span></span><br><span class="line">                u = u-&gt;fail;</span><br><span class="line">            </span><br><span class="line">            u = u-&gt;chld[c];  <span class="comment">//经过上面的循环，u要么是匹配结点要么是根结点，继续往下走 </span></span><br><span class="line">            <span class="keyword">if</span>(u == <span class="literal">NULL</span>)    <span class="comment">//如果结点为空，下一个字符重新从根结点开始 </span></span><br><span class="line">                u = root;</span><br><span class="line">            </span><br><span class="line">            Node* tmp = u;</span><br><span class="line">            <span class="keyword">while</span>(tmp != root) &#123;    <span class="comment">//只要没有返回到根结点，就证明在字典树上还存在找到单词的可能 </span></span><br><span class="line">                <span class="keyword">if</span>(tmp-&gt;sum &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    cnt += tmp-&gt;sum;<span class="comment">//单词计数器加上以当前结点为前缀的单词数 </span></span><br><span class="line">                    tmp-&gt;sum = <span class="number">-1</span>;  <span class="comment">//表示该单词结点已经计过数，防止重复计数 </span></span><br><span class="line">                &#125; </span><br><span class="line">                <span class="keyword">else</span>                <span class="comment">//该单词结点已经匹配过了直接退出,因为后面的状态转移是确定的并且是走过的 </span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                tmp = tmp-&gt;fail;    <span class="comment">//往其他子树上找 </span></span><br><span class="line">            &#125; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h3><p>注意用矩阵表示的时候数组一定要开够！！！<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ac_automaton</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> ch[maxnode][sigm_size];<span class="comment">//一个结点对应一个字符集</span></span><br><span class="line">    <span class="keyword">int</span> fail[maxnode];            <span class="comment">//每个结点的fail指针</span></span><br><span class="line">    <span class="keyword">int</span> val[maxnode];           <span class="comment">//每个结点的权值</span></span><br><span class="line">    <span class="keyword">int</span> sz; </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        sz = <span class="number">0</span>;</span><br><span class="line">        newnode();               <span class="comment">//创建一个根结点 </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">newnode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">memset</span>(ch[sz], <span class="number">-1</span>, <span class="keyword">sizeof</span>(ch[sz]));</span><br><span class="line">        val[sz] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> sz++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">idx</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> c - <span class="string">'a'</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span> *s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> u = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; s[i]; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> c = idx(s[i]);</span><br><span class="line">            <span class="keyword">if</span>(ch[u][c] == <span class="number">-1</span>)</span><br><span class="line">                ch[u][c] = newnode();</span><br><span class="line">            </span><br><span class="line">            u = ch[u][c];</span><br><span class="line">        &#125;</span><br><span class="line">        val[u]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getfail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">        fail[<span class="number">0</span>] = <span class="number">0</span>;            <span class="comment">//根结点的fail指针指向它自己也就是空 </span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sigm_size; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> u = ch[<span class="number">0</span>][i];</span><br><span class="line">            <span class="keyword">if</span>(u == <span class="number">-1</span>)&#123;        <span class="comment">//根结点编号为i的结点不存在时</span></span><br><span class="line">                ch[<span class="number">0</span>][i] = <span class="number">0</span>;    <span class="comment">//把不存在的边补上，将其标记为0</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;                <span class="comment">//存在时 </span></span><br><span class="line">                fail[u] = <span class="number">0</span>;    <span class="comment">//失配指针指向根结点并入队 </span></span><br><span class="line">                q.push(u);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">            <span class="keyword">int</span> u =q.front();</span><br><span class="line">            q.pop();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sigm_size; i++) &#123; <span class="comment">//寻找当前结点u的孩子结点的fail指针 </span></span><br><span class="line">                <span class="keyword">int</span> tmp = ch[u][i];</span><br><span class="line">                <span class="keyword">if</span>(tmp == <span class="number">-1</span>) </span><br><span class="line">                    ch[u][i] = ch[fail[u]][i];    <span class="comment">//把不存在的边补上，当前结点u不存在编号为i的孩子时，</span></span><br><span class="line">                                 <span class="comment">//让它指向当前结点u的fail指针指向的结点对应编号为i的孩子中存的结点编号 </span></span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//当前孩子结点的fail指针指向 当前结点u的fail指针指向的结点对应的孩子的编号 </span></span><br><span class="line">                    fail[tmp] = ch[fail[u]][i];   </span><br><span class="line">                    q.push(tmp);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">char</span> *t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> u = <span class="number">0</span>, cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; t[i]; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> c = idx(t[i]);</span><br><span class="line">            u = ch[u][c];      <span class="comment">//由于之前把边补齐了,所以可以直接往下走，有匹配直接就是结点，没有匹配直接是根结点 </span></span><br><span class="line">             </span><br><span class="line">            <span class="keyword">int</span> tmp = u;</span><br><span class="line">            <span class="keyword">while</span>(tmp != <span class="number">0</span>) &#123;  <span class="comment">//只要不是根结点，就证明有存在继续找到单词的可能 </span></span><br><span class="line">                cnt += val[tmp];</span><br><span class="line">                val[tmp] = <span class="number">0</span>;</span><br><span class="line">                </span><br><span class="line">                tmp = fail[tmp];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>##例题<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2222" target="_blank" rel="noopener">hdu 2222</a></p><p>这就是裸题，可以直接套模板使用</p><p>###代码<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">10005</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    Node* next[<span class="number">26</span>];</span><br><span class="line">    Node* fail;</span><br><span class="line">    <span class="keyword">int</span> sum;</span><br><span class="line">    Node()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(next, <span class="number">0</span>, <span class="keyword">sizeof</span> next);</span><br><span class="line">        sum = <span class="number">0</span>;</span><br><span class="line">        fail = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ac_automation</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    Node* root;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;root = <span class="keyword">new</span> Node;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="built_in">string</span> s)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Node* u = root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> c = s[i] - <span class="string">'a'</span>;</span><br><span class="line">            <span class="keyword">if</span>(u-&gt;next[c] == <span class="literal">NULL</span>) u-&gt;next[c] = <span class="keyword">new</span> Node;</span><br><span class="line">            u = u-&gt;next[c];</span><br><span class="line">        &#125;</span><br><span class="line">        u-&gt;sum++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getfail</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">queue</span>&lt;Node*&gt; q;</span><br><span class="line">        q.push(root);</span><br><span class="line">        <span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">            Node* u = q.front();</span><br><span class="line">            q.pop();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(u-&gt;next[i] != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(u == root) &#123;u-&gt;next[i]-&gt;fail = root;&#125;</span><br><span class="line">                    <span class="keyword">else</span> &#123;</span><br><span class="line">                        Node* tmp = u-&gt;fail;</span><br><span class="line">                        <span class="keyword">while</span>(tmp != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span>(tmp-&gt;next[i] != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                                u-&gt;next[i]-&gt;fail = tmp-&gt;next[i];</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            tmp = tmp-&gt;fail;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(tmp == <span class="literal">NULL</span>) u-&gt;next[i]-&gt;fail = root;</span><br><span class="line">                    &#125;</span><br><span class="line">                    q.push(u-&gt;next[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="built_in">string</span> s)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        Node* u = root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> c = s[i] - <span class="string">'a'</span>;</span><br><span class="line">            <span class="keyword">while</span>(u != root &amp;&amp; u-&gt;next[c] == <span class="literal">NULL</span>) &#123;u = u-&gt;fail;&#125;</span><br><span class="line">            u = u-&gt;next[c];</span><br><span class="line">            <span class="keyword">if</span>(u == <span class="literal">NULL</span>) u = root;</span><br><span class="line">            Node* tmp = u;</span><br><span class="line">            <span class="keyword">while</span>(tmp != root) &#123;</span><br><span class="line">                <span class="keyword">if</span>(tmp-&gt;sum &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    cnt += tmp-&gt;sum;</span><br><span class="line">                    tmp-&gt;sum = <span class="number">-1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">                tmp = tmp-&gt;fail;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fre</span><span class="params">(Node* u)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(u-&gt;next[i] != <span class="literal">NULL</span>) fre(u-&gt;next[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">free</span>(u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;ac;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        ac.init();</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        <span class="built_in">string</span> s;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">            ac.insert(s);</span><br><span class="line">        &#125;</span><br><span class="line">        ac.getfail();</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ac.query(s) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        ac.fre(ac.root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;转载&quot;&gt;&lt;a href=&quot;#转载&quot; class=&quot;headerlink&quot; title=&quot;转载&quot;&gt;&lt;/a&gt;转载&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/wenzhixin/p/9448045.html&quot; target=&quot;_bl
      
    
    </summary>
    
      <category term="字符串处理" scheme="https://weibolu.online/categories/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/"/>
    
    
      <category term="ACM模板" scheme="https://weibolu.online/tags/ACM%E6%A8%A1%E6%9D%BF/"/>
    
      <category term="字符串处理" scheme="https://weibolu.online/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>字符串处理2 —— 字典树</title>
    <link href="https://weibolu.online/2019/04/23/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%862%20%E2%80%94%E2%80%94%20%E5%AD%97%E5%85%B8%E6%A0%91/"/>
    <id>https://weibolu.online/2019/04/23/字符串处理2 —— 字典树/</id>
    <published>2019-04-23T15:46:28.000Z</published>
    <updated>2019-04-24T03:11:55.612Z</updated>
    
    <content type="html"><![CDATA[<h2 id="转载"><a href="#转载" class="headerlink" title="转载"></a>转载</h2><p><a href="https://www.cnblogs.com/wenzhixin/p/9417292.html" target="_blank" rel="noopener">字典树的构造</a></p><h2 id="hint"><a href="#hint" class="headerlink" title="hint"></a>hint</h2><p>其实字典树(Trie)还是很容易理解的，就是一棵常规的多叉树，每个分支分别对应不同的字符，这样每个字符都可以用一条从根到叶子节点的路径表示出来。<br>同时，字典树其实记录的就是公共前缀，可以用来查找公共前缀。</p><h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><p>上述连接中有字典树的三种实现，分别是用矩阵、链表和左右儿子表示法，其中前两种比较常见，最后一种我也不太熟悉φ(*￣0￣)。</p><p>不过按着测试结果来看，链表法耗费空间，而且时间效率较低。<br>矩阵的空间使用和链表差不多，但时间已经很优化了，毕竟是用空间换来的，嘤嘤嘤！<br>而最后一种方式则在时间和空间上达到了最优，时间空间两开花？<br>但之后的AC自动机可以很方便的用链表和矩阵构造，那就把三种都记录下来吧QAQ</p><p>(ps:如果用链表存的话，提交要用c++哦，用g++的话很容易爆内存，因为g++中指针的空间比c++大)</p><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e6</span> + <span class="number">100</span>;        <span class="comment">//类似内存池，只要不超内存，尽量开大点</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> sigma_size = <span class="number">26</span>;         <span class="comment">//表示字符的数量</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Trie</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> ch[maxn][sigma_size];</span><br><span class="line">    <span class="keyword">int</span> val[maxn];</span><br><span class="line">    <span class="keyword">int</span> sz;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span>                    <span class="comment">//初始化，释放内存池</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        sz = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">memset</span>(ch[<span class="number">0</span>], <span class="number">0</span>, <span class="keyword">sizeof</span> ch[<span class="number">0</span>]); <span class="comment">//节点单独初始化，可以防止爆内存</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">idx</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;<span class="keyword">return</span> c - <span class="string">'a'</span>;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span> *s, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="built_in">strlen</span>(s);         </span><br><span class="line">        <span class="keyword">int</span> u = <span class="number">0</span>;                  <span class="comment">//0表示根节点</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> c = idx(s[i]);</span><br><span class="line">            <span class="keyword">if</span>(!ch[u][c]) &#123;</span><br><span class="line">                <span class="built_in">memset</span>(ch[sz], <span class="number">0</span>, <span class="keyword">sizeof</span> ch[sz]);</span><br><span class="line">                ch[u][c] = sz++;</span><br><span class="line">            &#125;</span><br><span class="line">            u = ch[u][c];</span><br><span class="line">        &#125;</span><br><span class="line">        val[u] = v;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">query</span><span class="params">(<span class="keyword">char</span> *t)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = <span class="built_in">strlen</span>(t);</span><br><span class="line">        <span class="keyword">int</span> u = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> c = idx(t[i]);</span><br><span class="line">            <span class="keyword">if</span>(!ch[u][c]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            u = ch[u][c];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> cnt;</span><br><span class="line">    Node* chi[<span class="number">26</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Trie</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    Node* root;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;root = creat();&#125;</span><br><span class="line">    <span class="function">Node* <span class="title">create</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Node* tmp = <span class="keyword">new</span> Node;</span><br><span class="line">        tmp-&gt;cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(tmp-&gt;chi, <span class="number">0</span>, <span class="keyword">sizeof</span> tmp-&gt;chi);</span><br><span class="line">        <span class="keyword">return</span> tmp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span>* s)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Node* u = root;</span><br><span class="line">        <span class="keyword">int</span> len = <span class="built_in">strlen</span>(s);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> c = s[i] - <span class="string">'a'</span>;</span><br><span class="line">            <span class="keyword">if</span>(u-&gt;chi[c] == <span class="literal">NULL</span>) &#123;</span><br><span class="line">                u-&gt;chi[c] = creat();</span><br><span class="line">            &#125;</span><br><span class="line">            u = u-&gt;chi[c];</span><br><span class="line">            u-&gt;cnt++;                   <span class="comment">//cnt记录的是以它为前缀的数量，不同题目要保存不同的值</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">char</span>* t)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = <span class="built_in">strlen</span>(t);</span><br><span class="line">        Node* u = root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> c = t[i] - <span class="string">'a'</span>;</span><br><span class="line">            <span class="keyword">if</span>(u-&gt;chi[c] == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            u = u-&gt;chi[c];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> u-&gt;cnt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fre</span><span class="params">(Node* u)</span>                   <span class="comment">//用链表一定要记得释放内存哦（￣︶￣）↗　</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(u-&gt;chi[i] != <span class="literal">NULL</span>) fre(u-&gt;chi[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">free</span>(u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="左右儿子法"><a href="#左右儿子法" class="headerlink" title="左右儿子法"></a>左右儿子法</h3><p>这才是王道。。。虽然我不太会(/▽＼)<br>精髓在于把一棵多叉树转换为二叉树<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxw = <span class="number">1000010</span>; <span class="comment">//单词的最大个数 </span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxwl = <span class="number">101</span>;<span class="comment">//单词的最大长度</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxnode = maxw * maxwl + <span class="number">10</span>;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Trie</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> head[maxnode]; <span class="comment">//head[i]表示第i个结点的左儿子的编号</span></span><br><span class="line">    <span class="keyword">int</span> next[maxnode]; <span class="comment">//next[i]表示第i个结点的右兄弟的编号</span></span><br><span class="line">    <span class="keyword">int</span> val[maxnode];  <span class="comment">//以该结点为前缀的单词的个数 </span></span><br><span class="line">    <span class="keyword">char</span> ch[maxnode];  <span class="comment">//ch[i]表示第i个结点的字符 </span></span><br><span class="line">    <span class="keyword">int</span> sz;            <span class="comment">//结点总数</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        sz = <span class="number">1</span>;</span><br><span class="line">        head[<span class="number">0</span>] = next[<span class="number">0</span>] = val[<span class="number">0</span>] = <span class="number">0</span>; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span> *s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> u = <span class="number">0</span>, len = <span class="built_in">strlen</span>(s), v;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i ++) &#123;</span><br><span class="line">            <span class="comment">//在当前u的所有儿子中找s[i] </span></span><br><span class="line">            <span class="keyword">bool</span> found = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">for</span>(v = head[u]; v != <span class="number">0</span>; v = next[v]) &#123;<span class="comment">//遍历当前u的所有儿子 </span></span><br><span class="line">                <span class="keyword">if</span>(ch[v] == s[i]) &#123;</span><br><span class="line">                    found = <span class="literal">true</span>;<span class="comment">//找到 </span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(!found) &#123;<span class="comment">//没有找到则新建一个结点作为当前结点的儿子 </span></span><br><span class="line">                v = sz++;</span><br><span class="line">                ch[v] = s[i];</span><br><span class="line">                val[v] = <span class="number">0</span>;</span><br><span class="line">                </span><br><span class="line">                next[v] = head[u]; <span class="comment">//该结点的右兄弟是head[u](当前结点的左儿子)</span></span><br><span class="line">                head[u] = v;       <span class="comment">//v是当前结点u的左儿子</span></span><br><span class="line">                head[v] = <span class="number">0</span>;       <span class="comment">//v没有左儿子(叶子结点) </span></span><br><span class="line">            &#125; </span><br><span class="line">            </span><br><span class="line">            u = v;<span class="comment">//继续往下走 </span></span><br><span class="line">            val[u]++; <span class="comment">//以当前结点为前缀为单词个数++ </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">char</span> *t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> u = <span class="number">0</span>, len = <span class="built_in">strlen</span>(t), v;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">bool</span> found = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">for</span>(v = head[u]; v != <span class="number">0</span>; v = next[v]) &#123;</span><br><span class="line">                <span class="keyword">if</span>(ch[v] == t[i]) &#123;</span><br><span class="line">                    found = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(!found)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            u = v;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> val[u];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;转载&quot;&gt;&lt;a href=&quot;#转载&quot; class=&quot;headerlink&quot; title=&quot;转载&quot;&gt;&lt;/a&gt;转载&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/wenzhixin/p/9417292.html&quot; target=&quot;_bl
      
    
    </summary>
    
      <category term="字符串处理" scheme="https://weibolu.online/categories/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/"/>
    
    
      <category term="ACM模板" scheme="https://weibolu.online/tags/ACM%E6%A8%A1%E6%9D%BF/"/>
    
      <category term="字符串处理" scheme="https://weibolu.online/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>LIFE4 —— 最近打算.md</title>
    <link href="https://weibolu.online/2019/04/23/LIFE4%20%E2%80%94%E2%80%94%20%E6%9C%80%E8%BF%91%E6%89%93%E7%AE%97/"/>
    <id>https://weibolu.online/2019/04/23/LIFE4 —— 最近打算/</id>
    <published>2019-04-23T15:04:59.000Z</published>
    <updated>2019-04-24T02:59:18.918Z</updated>
    
    <content type="html"><![CDATA[<p>###最近<br>最近状态不太好。。。<br>cf一个不小心就连掉了100分，我的篮名(っ °Д °;)っ<br>而且最近一直被各种dp虐，真的要自闭了ヽ(<em>。&gt;Д&lt;)o゜&gt;)<br>马上又要期中考试了，也要开始着手准备(/▽＼)<br>前天也去了学校的acm选拔赛，想来已经入坑一年了，去年这个时候真的是特别侥幸才在最后三分钟过了一道题，勉强进入了预备役，不过到现在还没有打出像样的成绩，一直在被虐。。。<br>额，说起来其实进步也不少，最起码今年的选拔赛我基本都可以一眼看出是什么题目了（大二老狗要是还看不出来。。。）<br>心里也算是一直有着自己的梦想吧，总想着哪天我也可以很厉害，去哪里拿个金奖啦之类的(￣︶￣</em>))咸鱼的梦。。。</p><p>可能我是个比较乐观的人吧，总想着一切皆有可能，尽管有些不切实际，有些中二，但这就是我的青春了，不是吗？我应该感激自己成功走到了acm这条路上，最起码多年后我回忆起这段时光我也会觉得激动，我也不会后悔！</p><p>###未来<br>之后要开始做一段时间的dp了，感觉这个就像基本功一样，如果缺少了这个素质之后可能会很艰难。<br>然后就是准备下四省赛了，还有一个月的时间，这其实也是我们队伍的第一场正式比赛，虽然目测我们队实力最弱，但我要全力以赴来要应对这场比赛了，就定个小目标最少拿银吧。<br>cf的分数要再上上，距离5月还有三场，定个小目标上到1700+<br>最后准备下期中考试( •̀ ω •́ )✧</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;###最近&lt;br&gt;最近状态不太好。。。&lt;br&gt;cf一个不小心就连掉了100分，我的篮名(っ °Д °;)っ&lt;br&gt;而且最近一直被各种dp虐，真的要自闭了ヽ(&lt;em&gt;。&amp;gt;Д&amp;lt;)o゜&amp;gt;)&lt;br&gt;马上又要期中考试了，也要开始着手准备(/▽＼)&lt;br&gt;前天也去了学
      
    
    </summary>
    
      <category term="LIFE" scheme="https://weibolu.online/categories/LIFE/"/>
    
    
      <category term="What is life?" scheme="https://weibolu.online/tags/What-is-life/"/>
    
  </entry>
  
  <entry>
    <title>字符串处理1 —— kmp算法</title>
    <link href="https://weibolu.online/2019/04/16/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%861%20%E2%80%94%E2%80%94%20kmp%E7%AE%97%E6%B3%95/"/>
    <id>https://weibolu.online/2019/04/16/字符串处理1 —— kmp算法/</id>
    <published>2019-04-16T15:46:28.000Z</published>
    <updated>2019-04-24T02:53:33.592Z</updated>
    
    <content type="html"><![CDATA[<p>##转载<br><a href="https://blog.csdn.net/I_believe_CWJ/article/details/80438240" target="_blank" rel="noopener">kmp讲解</a></p><p>##hint<br> 关键就在于next数组的使用，存下每个等长前缀的位置。<br> kmp算法可以把常规匹配的时间复杂度从O(n*m)优化到O(n+m)</p><p>##模板<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> next[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">kmp_next</span><span class="params">(<span class="built_in">string</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    next[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; s.size(); i++) &#123;</span><br><span class="line">        <span class="keyword">while</span>(k &gt; <span class="number">-1</span> &amp;&amp; s[i] != s[k+<span class="number">1</span>]) k = next[k];</span><br><span class="line">        <span class="keyword">if</span>(s[i] == s[k+<span class="number">1</span>]) k++;</span><br><span class="line">        next[i] = k;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">kmp</span><span class="params">(<span class="built_in">string</span> s1, <span class="built_in">string</span> s2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s1.size(); i++) &#123;</span><br><span class="line">        <span class="keyword">while</span>(k &gt; <span class="number">-1</span> &amp;&amp; s[i] != s[k+<span class="number">1</span>]) k = next[k];</span><br><span class="line">        <span class="keyword">if</span>(s1[i] == s2[k+<span class="number">1</span>]) k++;</span><br><span class="line">        <span class="keyword">if</span>(k == s2.size()) ans++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;##转载&lt;br&gt;&lt;a href=&quot;https://blog.csdn.net/I_believe_CWJ/article/details/80438240&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;kmp讲解&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;##hint&lt;br&gt;
      
    
    </summary>
    
      <category term="字符串处理" scheme="https://weibolu.online/categories/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/"/>
    
    
      <category term="ACM模板" scheme="https://weibolu.online/tags/ACM%E6%A8%A1%E6%9D%BF/"/>
    
      <category term="字符串处理" scheme="https://weibolu.online/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>数据结构2 —— 线段树</title>
    <link href="https://weibolu.online/2019/04/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%842%20%E2%80%94%E2%80%94%20%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    <id>https://weibolu.online/2019/04/16/数据结构2 —— 线段树/</id>
    <published>2019-04-15T16:57:05.000Z</published>
    <updated>2019-04-24T02:48:51.502Z</updated>
    
    <content type="html"><![CDATA[<p>##转载<br><a href="https://blog.csdn.net/u012469987/article/details/41357377" target="_blank" rel="noopener">详细的讲解线段树</a></p><p>##定义<br>虽然作用和树状数组很相似，但结构与树状数组完全不同，这是一棵真正的树（￣︶￣）↗　</p><p>简单说，线段树就是一棵二叉树，每个节点存储的是一段区间，树根节点存储的是整个区间长度，那么它到底能做什么呢？QAQ</p><p>第一种常见的操作就是可以在树的节点上存储区间的一个特征值，比如最大值，最小值，或者区间和等等……而且可以利用左右子树很快的进行更新。<br>emmm画图太麻烦了，还是先看上面的转载吧。</p><p>进阶操作就是进行区间更新啦，这也是线段树比树状数组优秀的地方所在，这里就要用到一种lazy的思想啦，如果每次更新都要更新到最底层时间复杂度将会相当爆炸(っ °Д °;)っ<br>而我们的lazy思想就是将这个改变先存起来，直到我需要统计这个区间的值时，再把lazy里偷懒没有改变的量改变了，再把lazy推给子节点，同样的什么时候需要求子节点的值了，再去计算。是不是有点像拖延症，怪不得叫lazy…φ(*￣0￣)</p><p>能够进行点更新和区间更新以及查询操作，基本就算入门了，让我们来A几道裸题吧( •̀ ω •́ )✧</p><p>ps:线段树的空间开辟要为原大小的4倍哦</p><p>##模板<br>当然，先上模板(其实并不是模板，只是为了说明各种操作的运行原理)QAQ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//常用宏定义</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mid ((l+r)&gt;&gt;1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lson rt &lt;&lt; 1, l, mid</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rson rt &lt;&lt; 1|1, mid+1, r</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span> + <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> Max[maxn&lt;&lt;<span class="number">2</span>], Min[maxn&lt;&lt;<span class="number">2</span>], val[maxn];</span><br><span class="line"></span><br><span class="line"><span class="comment">//建树</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l == r) Min[rt] = Max[rt] = val[l];</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        build(lson);</span><br><span class="line">        build(rson);</span><br><span class="line">        Max[rt] = max(Max[rt&lt;&lt;<span class="number">1</span>], Max[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">        Min[rt] = min(Min[rt&lt;&lt;<span class="number">1</span>], Min[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//区间查询</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> L, <span class="keyword">int</span> R)</span>  <span class="comment">//L和R是要查询的区间</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R) &#123;</span><br><span class="line">        ans1 = max(ans1, Max[rt]);</span><br><span class="line">        ans2 = min(ans2, Min[rt]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= mid) query(lson, L, R);</span><br><span class="line">        <span class="keyword">if</span>(R &gt; mid) query(rson, L, R);     <span class="comment">//意识到宏定义有多好用了吧</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//点更新</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update1</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span>  <span class="comment">//x是要更新的位置</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l == r) sum[rt] += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(x &lt;= mid) update(lson, x);</span><br><span class="line">        <span class="keyword">else</span> update(rson, x);</span><br><span class="line">        sum[rt] = sum[rt&lt;&lt;<span class="number">1</span>] + sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//区间查询</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushDown</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> len)</span>    <span class="comment">//对延迟的增量进行操作</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    add[rt&lt;&lt;<span class="number">1</span>] += add[rt];</span><br><span class="line">    add[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>] += add[rt];</span><br><span class="line">    sum[rt&lt;&lt;<span class="number">1</span>] += (len-(len&gt;&gt;<span class="number">1</span>)) * add[rt];</span><br><span class="line">    sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>] += (len&gt;&gt;<span class="number">1</span>) * add[rt];</span><br><span class="line">    add[rt] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update2</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> L, <span class="keyword">int</span> R, ll z)</span><span class="comment">//这个是区间增加</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R) &#123;</span><br><span class="line">        add[rt] += z;</span><br><span class="line">        ll t1 = (r-l+<span class="number">1</span>) * z;</span><br><span class="line">        sum[rt] += t1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(add[rt]) pushDown(rt, r-l+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= mid) update2(lson, L, R, z);</span><br><span class="line">        <span class="keyword">if</span>(R &gt; mid) update2(rson, L, R, z);</span><br><span class="line">        sum[rt] = sum[rt&lt;&lt;<span class="number">1</span>] + sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>##例题</p><h3 id="Apoj-3264"><a href="#Apoj-3264" class="headerlink" title="Apoj 3264"></a>A<a href="http://poj.org/problem?id=3264" target="_blank" rel="noopener">poj 3264</a></h3><p>记录区间最大和最小值，涉及点更新和区间查询<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FOR(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mid ((l+r)&gt;&gt;1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lson rt&lt;&lt;1, l, mid</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rson rt&lt;&lt;1|1, mid+1, r</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5e4</span> + <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">int</span> Max[maxn&lt;&lt;<span class="number">2</span>], Min[maxn&lt;&lt;<span class="number">2</span>], val[maxn];</span><br><span class="line"><span class="keyword">int</span> ans1, ans2;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l == r) Min[rt] = Max[rt] = val[l];</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        build(lson);</span><br><span class="line">        build(rson);</span><br><span class="line">        Max[rt] = max(Max[rt&lt;&lt;<span class="number">1</span>], Max[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">        Min[rt] = min(Min[rt&lt;&lt;<span class="number">1</span>], Min[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R) &#123;</span><br><span class="line">        ans1 = max(ans1, Max[rt]);</span><br><span class="line">        ans2 = min(ans2, Min[rt]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= mid) query(lson, L, R);</span><br><span class="line">        <span class="keyword">if</span>(R &gt; mid) query(rson, L, R);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;val[i]);</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        build(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">            ans1 = -inf, ans2 = inf;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">            query(<span class="number">1</span>, <span class="number">1</span>, n, L, R);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans1-ans2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Bhdu-1754"><a href="#Bhdu-1754" class="headerlink" title="Bhdu 1754"></a>B<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1754" target="_blank" rel="noopener">hdu 1754</a></h3><p>记录区间最大值，设计点更新和区间查询<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FOR(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mid ((l+r)&gt;&gt;1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lson rt&lt;&lt;1, l, mid</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rson rt&lt;&lt;1|1, mid+1, r</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2e6</span>+<span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> Max[maxn&lt;&lt;<span class="number">2</span>], val[maxn];</span><br><span class="line"><span class="keyword">int</span> ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l == r) Max[rt] = val[l];</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        build(lson);</span><br><span class="line">        build(rson);</span><br><span class="line">        Max[rt] = max(Max[rt&lt;&lt;<span class="number">1</span>], Max[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l &gt;= L &amp;&amp; r &lt;= R) &#123;</span><br><span class="line">        ans = max(ans, Max[rt]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= mid) query(lson, L, R);</span><br><span class="line">        <span class="keyword">if</span>(R &gt; mid) query(rson, L, R);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> pos, <span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l == r &amp;&amp; l == pos) &#123;</span><br><span class="line">        Max[rt] = num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(pos &lt;= mid) update(lson, pos, num);</span><br><span class="line">        <span class="keyword">else</span> update(rson, pos, num);</span><br><span class="line">        Max[rt] = max(Max[rt&lt;&lt;<span class="number">1</span>], Max[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;val[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        build(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">        <span class="keyword">char</span> c, cc;</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%c"</span>, &amp;cc);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%c"</span>, &amp;c);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">'Q'</span>) &#123;</span><br><span class="line">                ans = -inf;</span><br><span class="line">                query(<span class="number">1</span>, <span class="number">1</span>, n, L, R);</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                update(<span class="number">1</span>, <span class="number">1</span>, n, L, R);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Chdu-1698"><a href="#Chdu-1698" class="headerlink" title="Chdu 1698"></a>C<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1698" target="_blank" rel="noopener">hdu 1698</a></h3><p>dota！！！( •̀ ω •́ )y，虽然我没怎么玩过，但这个界面让我想起了War3…<br>涉及到区间更新，以及它的更新方式是直接改变，不是增加。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FOR(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mid ((l+r)&gt;&gt;1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lson rt&lt;&lt;1, l, mid</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rson rt&lt;&lt;1|1, mid+1, r</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span> + <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> sum[maxn&lt;&lt;<span class="number">2</span>], add[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    add[rt] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l == r) sum[rt] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        build(lson);</span><br><span class="line">        build(rson);</span><br><span class="line">        sum[rt] = sum[rt&lt;&lt;<span class="number">1</span>] + sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update1</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> pos, <span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l == r &amp;&amp; pos == l) sum[rt] = num;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(pos &lt;= mid) &#123;</span><br><span class="line">            update1(lson, pos, num);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> update1(rson, pos, num);</span><br><span class="line">        sum[rt] = sum[rt&lt;&lt;<span class="number">1</span>] + sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushDown</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    add[rt&lt;&lt;<span class="number">1</span>] = add[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>] = add[rt];</span><br><span class="line">    sum[rt&lt;&lt;<span class="number">1</span>] = (len-(len&gt;&gt;<span class="number">1</span>)) * add[rt];</span><br><span class="line">    sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>] = (len&gt;&gt;<span class="number">1</span>)*add[rt];</span><br><span class="line">    add[rt] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> z)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R) &#123;</span><br><span class="line">        add[rt] = z;</span><br><span class="line">        sum[rt] = (r-l+<span class="number">1</span>) * z;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(add[rt]) pushDown(rt, r-l+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= mid) update(lson, L, R, z);</span><br><span class="line">        <span class="keyword">if</span>(R &gt; mid) update(rson, L, R, z);</span><br><span class="line">        sum[rt] = sum[rt&lt;&lt;<span class="number">1</span>] + sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> t1 = <span class="number">1</span>; t1 &lt;= t; t1++) &#123;</span><br><span class="line">        <span class="keyword">int</span> n, q;</span><br><span class="line">        <span class="keyword">int</span> x, y, z;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; q;</span><br><span class="line">        build(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= q; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;y, &amp;z);</span><br><span class="line">            update(<span class="number">1</span>, <span class="number">1</span>, n, x, y, z);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Case "</span> &lt;&lt; t1 &lt;&lt; <span class="string">": The total value of the hook is "</span> &lt;&lt; sum[<span class="number">1</span>] &lt;&lt; <span class="string">'.'</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Dpoj-3468"><a href="#Dpoj-3468" class="headerlink" title="Dpoj 3468"></a>D<a href="http://poj.org/problem?id=3468" target="_blank" rel="noopener">poj 3468</a></h3><p>对区间进行怎加，涉及区间更新和区间查询<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FOR(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mid ((l+r)&gt;&gt;1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lson rt&lt;&lt;1, l, mid</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rson rt&lt;&lt;1|1, mid+1, r</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span>+<span class="number">100</span>;</span><br><span class="line">ll sum[maxn&lt;&lt;<span class="number">2</span>], add[maxn&lt;&lt;<span class="number">2</span>], val[maxn];</span><br><span class="line">ll ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    add[rt] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l == r) sum[rt] = val[l];</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        build(lson);</span><br><span class="line">        build(rson);</span><br><span class="line">        sum[rt] = sum[rt&lt;&lt;<span class="number">1</span>] + sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushDown</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    add[rt&lt;&lt;<span class="number">1</span>] += add[rt];</span><br><span class="line">    add[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>] += add[rt];</span><br><span class="line">    sum[rt&lt;&lt;<span class="number">1</span>] += (len-(len&gt;&gt;<span class="number">1</span>)) * add[rt];</span><br><span class="line">    sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>] += (len&gt;&gt;<span class="number">1</span>) * add[rt];</span><br><span class="line">    add[rt] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> L, <span class="keyword">int</span> R, ll z)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R) &#123;</span><br><span class="line">        add[rt] += z;</span><br><span class="line">        ll t1 = (r-l+<span class="number">1</span>)*z;</span><br><span class="line">        sum[rt] += t1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(add[rt])pushDown(rt, r-l+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= mid) update(lson, L, R, z);</span><br><span class="line">        <span class="keyword">if</span>(R &gt; mid) update(rson, L, R, z);</span><br><span class="line">        sum[rt] = sum[rt&lt;&lt;<span class="number">1</span>] + sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R) ans += sum[rt];</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(add[rt]) pushDown(rt, r-l+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= mid) query(lson, L, R);</span><br><span class="line">        <span class="keyword">if</span>(R &gt; mid) query(rson, L, R);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, q;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; q) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%lld"</span>, &amp;val[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        build(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">        <span class="keyword">char</span> c1, c2;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= q; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%c"</span>, &amp;c1);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%c"</span>, &amp;c2);</span><br><span class="line">            <span class="keyword">if</span>(c2 == <span class="string">'C'</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> a, b, c;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">                update(<span class="number">1</span>, <span class="number">1</span>, n, a, b, c);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(c2 == <span class="string">'Q'</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> a, b;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">                ans = <span class="number">0</span>;</span><br><span class="line">                query(<span class="number">1</span>, <span class="number">1</span>, n, a, b);</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Epoj-2481"><a href="#Epoj-2481" class="headerlink" title="Epoj 2481"></a>E<a href="http://poj.org/problem?id=2481" target="_blank" rel="noopener">poj 2481</a></h3><p>利用线段树求逆序对，有点类似之前用树状数组的一道题目，重点在于理解它排完序后依次在树中添加节点前查询就是对应的点的答案，只涉及点更新和区间查询。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span> + <span class="number">100</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mid ((l+r)&gt;&gt;1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lson rt&lt;&lt;1, l, mid</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rson rt&lt;&lt;1|1, mid+1, r</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> sum[maxn &lt;&lt; <span class="number">2</span>], ans[maxn];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">NODE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r, id;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> NODE &amp;a)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(l == a.l &amp;&amp; r &gt; a.r) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(l &lt; a.l) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;pp[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l == r) sum[rt] += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(x &lt;= mid) update(lson, x);</span><br><span class="line">        <span class="keyword">else</span> update(rson, x);</span><br><span class="line">        sum[rt] = sum[rt&lt;&lt;<span class="number">1</span>] + sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l &gt;= L &amp;&amp; r &lt;= R) &#123;ret += sum[rt]; <span class="keyword">return</span> ret;&#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= mid) ret += query(lson, L, R);</span><br><span class="line">        <span class="keyword">if</span>(R &gt; mid) ret += query(rson, L, R);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n &amp;&amp; n) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(sum, <span class="number">0</span>, <span class="keyword">sizeof</span> sum);</span><br><span class="line">        <span class="built_in">memset</span>(ans, <span class="number">0</span>, <span class="keyword">sizeof</span> ans);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;pp[i].l, &amp;pp[i].r);</span><br><span class="line">            pp[i].id = i;</span><br><span class="line">            pp[i].l++;</span><br><span class="line">            pp[i].r++;</span><br><span class="line">        &#125;</span><br><span class="line">        sort(pp+<span class="number">1</span>, pp+<span class="number">1</span>+n);</span><br><span class="line">        update(<span class="number">1</span>, <span class="number">1</span>, n, pp[<span class="number">1</span>].r);</span><br><span class="line">        ans[pp[<span class="number">1</span>].id] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(pp[i].l == pp[i<span class="number">-1</span>].l &amp;&amp; pp[i].r == pp[i<span class="number">-1</span>].r) &#123;</span><br><span class="line">                ans[pp[i].id] = ans[pp[i<span class="number">-1</span>].id];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> ans[pp[i].id] = query(<span class="number">1</span>, <span class="number">1</span>, n, pp[i].r, n);</span><br><span class="line">            <span class="comment">//cout &lt;&lt; 'a' &lt;&lt; endl;</span></span><br><span class="line">            update(<span class="number">1</span>, <span class="number">1</span>, n, pp[i].r);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans[<span class="number">1</span>] ;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) <span class="built_in">cout</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; ans[i];</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>That’s all, thank you!!!(￣︶￣*))</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;##转载&lt;br&gt;&lt;a href=&quot;https://blog.csdn.net/u012469987/article/details/41357377&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;详细的讲解线段树&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;##定义&lt;br&gt;虽然
      
    
    </summary>
    
      <category term="数据结构" scheme="https://weibolu.online/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
      <category term="ACM模板" scheme="https://weibolu.online/tags/ACM%E6%A8%A1%E6%9D%BF/"/>
    
      <category term="数据结构" scheme="https://weibolu.online/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>ACM技巧1 —— 快速读入</title>
    <link href="https://weibolu.online/2019/04/15/ACM%E6%8A%80%E5%B7%A71%20%E2%80%94%E2%80%94%20%E5%BF%AB%E9%80%9F%E8%AF%BB%E5%85%A5/"/>
    <id>https://weibolu.online/2019/04/15/ACM技巧1 —— 快速读入/</id>
    <published>2019-04-15T12:57:02.000Z</published>
    <updated>2019-04-24T02:55:50.531Z</updated>
    
    <content type="html"><![CDATA[<p>##针对acm中的一些输入问题：</p><p>###1.常见的就是用scanf和printf来代替cin、cout</p><p>###2.但是当侧式组数比较多时，方法1也不太好用了，这时候就有一种新的方法：快速读入</p><p>快速读入的本质其实是用读入字符来代替读入整数</p><p>比如，下面这个是常见的int和long long型数据的快速读入，十分好用，但要注意下不同环境中换行的符号不同。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> fastIO &#123;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> BUF_SIZE 100000</span></span><br><span class="line">    <span class="comment">//fread -&gt; read</span></span><br><span class="line">    <span class="keyword">bool</span> IOerror = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">nc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">char</span> buf[BUF_SIZE], *p1 = buf + BUF_SIZE, *pend = buf + BUF_SIZE;</span><br><span class="line">        <span class="keyword">if</span>(p1 == pend) &#123;</span><br><span class="line">            p1 = buf;</span><br><span class="line">            pend = buf + fread(buf, <span class="number">1</span>, BUF_SIZE, <span class="built_in">stdin</span>);</span><br><span class="line">            <span class="keyword">if</span>(pend == p1) &#123;</span><br><span class="line">                IOerror = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> *p1++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">blank</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ch == <span class="string">' '</span> || ch == <span class="string">'\n'</span> || ch == <span class="string">'\r'</span> || ch == <span class="string">'\t'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> &amp;x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> ch;</span><br><span class="line">        <span class="keyword">while</span>(blank(ch = nc()));</span><br><span class="line">        <span class="keyword">if</span>(IOerror)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">for</span>(x = ch - <span class="string">'0'</span>; (ch = nc()) &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>; x = x * <span class="number">10</span> + ch - <span class="string">'0'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">readll</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> &amp;x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> ch;</span><br><span class="line">        <span class="keyword">while</span>(blank(ch = nc()));</span><br><span class="line">        <span class="keyword">if</span>(IOerror)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">for</span>(x = ch - <span class="string">'0'</span>; (ch = nc()) &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>; x = x * <span class="number">10</span> + ch - <span class="string">'0'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">undef</span> BUF_SIZE</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h3 id="多种类型快速读入传送门"><a href="#多种类型快速读入传送门" class="headerlink" title="多种类型快速读入传送门"></a>多种类型快速读入传送门</h3><p><a href="https://blog.csdn.net/qq_36297813/article/details/87874335" target="_blank" rel="noopener">转载下找到的重载的快速读入</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;##针对acm中的一些输入问题：&lt;/p&gt;
&lt;p&gt;###1.常见的就是用scanf和printf来代替cin、cout&lt;/p&gt;
&lt;p&gt;###2.但是当侧式组数比较多时，方法1也不太好用了，这时候就有一种新的方法：快速读入&lt;/p&gt;
&lt;p&gt;快速读入的本质其实是用读入字符来代替读入
      
    
    </summary>
    
      <category term="ACM技巧" scheme="https://weibolu.online/categories/ACM%E6%8A%80%E5%B7%A7/"/>
    
    
      <category term="ACM模板" scheme="https://weibolu.online/tags/ACM%E6%A8%A1%E6%9D%BF/"/>
    
  </entry>
  
  <entry>
    <title>数据结构1 —— 树状数组</title>
    <link href="https://weibolu.online/2019/04/06/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%841%20%E2%80%94%E2%80%94%20%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/"/>
    <id>https://weibolu.online/2019/04/06/数据结构1 —— 树状数组/</id>
    <published>2019-04-05T16:57:05.000Z</published>
    <updated>2019-04-24T02:48:55.402Z</updated>
    
    <content type="html"><![CDATA[<h2 id="转载"><a href="#转载" class="headerlink" title="转载"></a>转载</h2><p>稍微学习下后就知道树状数组是怎么一回事了，先把我看到的好的博客连接出来吧：<br><a href="https://blog.csdn.net/Yaokai_AssultMaster/article/details/79492190" target="_blank" rel="noopener">https://blog.csdn.net/Yaokai_AssultMaster/article/details/79492190</a></p><p><a href="https://blog.csdn.net/FlushHip/article/details/79165701" target="_blank" rel="noopener">https://blog.csdn.net/FlushHip/article/details/79165701</a></p><p><a href="https://blog.csdn.net/guhaiteng/article/details/52138756" target="_blank" rel="noopener">例题poj2299和离散化</a></p><h2 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h2><p>树状数组和线段树的作用相似，都是实现对单点的数据修改，以及对范围的查询，比起直接用数组存，树状数组可以将时间复杂度优化到O(nlogn)，极其方便还好写。<br>值得注意的是线段树不能有零这个点，因为零无法操作，会造成死循环。<br>还有与树状数组十分匹配的一种做法就是进行离散化操作，将原表中的元素排好序并给出其排好序的标号。</p><h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><p>其实根本不用模板，但还是手写了一个：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BIT</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> tree[maxn];</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;<span class="keyword">return</span> x &amp; (-x);&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) tree[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(; p &lt;= n; p += lowbit(p)) &#123;</span><br><span class="line">            tree[p] += x;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> p)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(; p &gt; <span class="number">0</span>; p -= lowbit(p)) &#123;</span><br><span class="line">            ret += tree[p];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getsum</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(r) - query(l<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><p>写了许多简单的例题练手，比如这个：<br><a href="http://poj.org/problem?id=2352" target="_blank" rel="noopener">poj 2352</a><br>要注意到题目中的y值已经排好序了，所以只用将x排序，然后放到一维上，再生成树状数组就行了。</p><p>代码如下：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">15100</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">NODE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y, pos;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> NODE a)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(x &lt; a.x) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(x == a.x &amp;&amp; y &lt; a.y) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;nn[maxn];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BIT</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> tree[maxn];</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;<span class="keyword">return</span> x &amp; (-x);&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) tree[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(; p &lt;= n; p += lowbit(p)) &#123;</span><br><span class="line">            tree[p] += x;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> p)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(; p &gt; <span class="number">0</span>; p -= lowbit(p)) &#123;</span><br><span class="line">            ret += tree[p];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getsum</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(r) - query(l<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;bb;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a1[maxn], ans[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; nn[i].x &gt;&gt; nn[i].y;</span><br><span class="line">        nn[i].pos = i;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(nn+<span class="number">1</span>, nn+n+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        a1[nn[i].pos] = i;              <span class="comment">//离散化</span></span><br><span class="line">        <span class="comment">//cout &lt;&lt; a1[nn[i].pos] &lt;&lt; endl;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memset</span>(ans, <span class="number">0</span>, <span class="keyword">sizeof</span> ans);</span><br><span class="line">    bb.init();</span><br><span class="line">    bb.n = n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bb.add(a1[i], <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> x = bb.query(a1[i]) - <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">'a'</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        ans[x]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans[i] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">5</span></span><br><span class="line"><span class="comment">1 1</span></span><br><span class="line"><span class="comment">5 1</span></span><br><span class="line"><span class="comment">7 1</span></span><br><span class="line"><span class="comment">3 3</span></span><br><span class="line"><span class="comment">5 5</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;转载&quot;&gt;&lt;a href=&quot;#转载&quot; class=&quot;headerlink&quot; title=&quot;转载&quot;&gt;&lt;/a&gt;转载&lt;/h2&gt;&lt;p&gt;稍微学习下后就知道树状数组是怎么一回事了，先把我看到的好的博客连接出来吧：&lt;br&gt;&lt;a href=&quot;https://blog.csdn.ne
      
    
    </summary>
    
      <category term="数据结构" scheme="https://weibolu.online/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
      <category term="ACM模板" scheme="https://weibolu.online/tags/ACM%E6%A8%A1%E6%9D%BF/"/>
    
      <category term="数据结构" scheme="https://weibolu.online/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>LIFE3 —— cf题解暂缓</title>
    <link href="https://weibolu.online/2019/04/06/LIFE3%20%E2%80%94%E2%80%94%20cf%E9%A2%98%E8%A7%A3%E6%9A%82%E7%BC%93/"/>
    <id>https://weibolu.online/2019/04/06/LIFE3 —— cf题解暂缓/</id>
    <published>2019-04-05T16:35:43.000Z</published>
    <updated>2019-04-24T02:57:10.621Z</updated>
    
    <content type="html"><![CDATA[<p>好久没有写过cf题解了，但这几场cf也都没拉下（ps:包括愚人节那场，令人印象深刻的B题），只是发现如果我疲于写题解的话就没有太多时间去学新知识了，所以我决定先定一个小目标，把cf打到紫名，然后再坚持写题解（不然写的题解也都是些水题），不过蓝名的感觉真爽，嘿嘿，得瑟一波！( •̀ ω •́ )✧</p><p>然后明天要去沙漠玩两天，cf估计是打不上了，之后可以发篇博客晒照片。</p><p>对了，昨天还看了ICPC世界总决赛的直播，真正的见识了什么叫神仙打架还有tourist大神差点AK的大手笔，emmm那手速。不过这也坚定了我好好打ACM的信念吧，要好好想想之后要怎么加强训练了。</p><p>还有上周的天梯赛，真的把我打自闭了，就拿了153分，甚至有学弟都比我高，还是因为自己太菜了，处处考察string的处理，难受死了，值得一提的是去图书馆借到了福尔摩斯探案集，偶然间看到的，这可是我初中的时候最喜欢的书啦，感觉很大程度上影响了我的理科生思维，没事还可以读几节挺好的。（(っ °Д °;)っ不，你要加强训练）</p><p>接着写一篇关于树状数组的博客吧，也是终于搞懂，也刷了几道水题，感觉这种类似写日记的感觉还挺适合我的，真棒！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;好久没有写过cf题解了，但这几场cf也都没拉下（ps:包括愚人节那场，令人印象深刻的B题），只是发现如果我疲于写题解的话就没有太多时间去学新知识了，所以我决定先定一个小目标，把cf打到紫名，然后再坚持写题解（不然写的题解也都是些水题），不过蓝名的感觉真爽，嘿嘿，得瑟一波！(
      
    
    </summary>
    
      <category term="LIFE" scheme="https://weibolu.online/categories/LIFE/"/>
    
    
      <category term="What is life?" scheme="https://weibolu.online/tags/What-is-life/"/>
    
      <category term="codeforces" scheme="https://weibolu.online/tags/codeforces/"/>
    
  </entry>
  
  <entry>
    <title>数据结构3 —— 并查集</title>
    <link href="https://weibolu.online/2019/04/02/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%843%20%E2%80%94%E2%80%94%20%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
    <id>https://weibolu.online/2019/04/02/数据结构3 —— 并查集/</id>
    <published>2019-04-02T15:46:28.000Z</published>
    <updated>2019-04-24T02:49:27.371Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span> + <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> cha[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cha[i] = i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">findd</span><span class="params">(<span class="keyword">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cha[a] == a) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> findd(cha[a]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unite</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> A = findd(a);</span><br><span class="line">    <span class="keyword">int</span> B = findd(b);</span><br><span class="line">    <span class="keyword">if</span>(A == B) <span class="keyword">return</span> ;</span><br><span class="line">    <span class="keyword">else</span> cha[B] = A;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;li
      
    
    </summary>
    
      <category term="数据结构" scheme="https://weibolu.online/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
      <category term="ACM模板" scheme="https://weibolu.online/tags/ACM%E6%A8%A1%E6%9D%BF/"/>
    
      <category term="数据结构" scheme="https://weibolu.online/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>ACM技巧2 —— 快速输入输出流</title>
    <link href="https://weibolu.online/2019/04/02/ACM%E6%8A%80%E5%B7%A72%20%E2%80%94%E2%80%94%20%E5%BF%AB%E9%80%9F%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%B5%81/"/>
    <id>https://weibolu.online/2019/04/02/ACM技巧2 —— 快速输入输出流/</id>
    <published>2019-04-02T15:31:28.000Z</published>
    <updated>2019-04-24T02:56:33.594Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> SZ = <span class="number">1</span> &lt;&lt; <span class="number">20</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">fastio</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">char</span> inbuf[SZ];</span><br><span class="line">    <span class="keyword">char</span> outbuf[SZ];</span><br><span class="line">    fastio()</span><br><span class="line">    &#123;</span><br><span class="line">        setvbuf(<span class="built_in">stdin</span>, inbuf, _IOFBF, SZ);</span><br><span class="line">        setvbuf(<span class="built_in">stdout</span>, outbuf, _IOFBF, SZ);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;io;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;li
      
    
    </summary>
    
      <category term="ACM技巧" scheme="https://weibolu.online/categories/ACM%E6%8A%80%E5%B7%A7/"/>
    
    
      <category term="ACM模板" scheme="https://weibolu.online/tags/ACM%E6%A8%A1%E6%9D%BF/"/>
    
  </entry>
  
  <entry>
    <title>基础算法1 —— 快速排序模板</title>
    <link href="https://weibolu.online/2019/04/02/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%951%20%E2%80%94%E2%80%94%20%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F%E6%A8%A1%E6%9D%BF/"/>
    <id>https://weibolu.online/2019/04/02/基础算法1 —— 快速排序模板/</id>
    <published>2019-04-02T15:31:03.000Z</published>
    <updated>2019-04-24T02:53:07.273Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> s[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l &lt; r) &#123;</span><br><span class="line">        <span class="keyword">int</span> i = l, j = r, x = s[i];</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j) &#123;</span><br><span class="line">            <span class="keyword">while</span>(i &lt; j &amp;&amp; s[i] &gt;= x) j--;</span><br><span class="line">            <span class="keyword">if</span>(i &lt; j) s[i++] = s[j];</span><br><span class="line">            <span class="keyword">while</span>(i &lt; j &amp;&amp; s[j] &lt;= x) i++;</span><br><span class="line">            <span class="keyword">if</span>(i &lt; j) s[j--] = s[i];</span><br><span class="line">        &#125;</span><br><span class="line">        s[i] = x;</span><br><span class="line">        quick_sort(l, i);</span><br><span class="line">        quick_sort(i+<span class="number">1</span>, r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;li
      
    
    </summary>
    
      <category term="ACM基础算法" scheme="https://weibolu.online/categories/ACM%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="ACM模板" scheme="https://weibolu.online/tags/ACM%E6%A8%A1%E6%9D%BF/"/>
    
  </entry>
  
  <entry>
    <title>博弈论1 —— 基础博弈</title>
    <link href="https://weibolu.online/2019/03/26/%E5%8D%9A%E5%BC%88%E8%AE%BA1%20%E2%80%94%E2%80%94%20%E5%9F%BA%E7%A1%80%E5%8D%9A%E5%BC%88/"/>
    <id>https://weibolu.online/2019/03/26/博弈论1 —— 基础博弈/</id>
    <published>2019-03-26T08:44:07.000Z</published>
    <updated>2019-04-24T02:51:14.386Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>博弈论作为一种特殊类型的题目，解决途径也与众不同，这就建个专题将它们都收了ψ(｀∇´)ψ<br>还有一个讲解的比较详细的博客转载一波( •̀ ω •́ )✧：<br><a href="http://www.cnblogs.com/celia01/archive/2011/11/15/2250171.html" target="_blank" rel="noopener">http://www.cnblogs.com/celia01/archive/2011/11/15/2250171.html</a></p><p>其是博弈论就是一个找所谓的核，必胜态操作后必然转换到必败态，而必败态也必然转换到必败态，这样就可以从最基本的必败态找起，再除去一步能抵达它的所有状态，再找到一个必败态（为什么我很想说必胜客φ(゜▽゜*)♪），依次类推。总之最后还是回归到了找规律这一步，万物皆可找规律。。。</p><p>下面就是题目啦：</p><h3 id="A-POJ-1067"><a href="#A-POJ-1067" class="headerlink" title="A: POJ - 1067"></a>A: <a href="http://poj.org/problem?id=1067" target="_blank" rel="noopener">POJ - 1067</a></h3><p>威佐夫博弈，规律还是很难找的。。。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll a, b;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a &lt; b) swap(a, b);</span><br><span class="line">        ll c = a - b;</span><br><span class="line">        <span class="keyword">int</span> w =(<span class="keyword">int</span>)((<span class="number">1</span> + <span class="built_in">sqrt</span>(<span class="number">5.0</span>)) / <span class="number">2</span> * c);</span><br><span class="line">        <span class="keyword">if</span>(w == b) <span class="built_in">cout</span> &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="B-POJ-1740"><a href="#B-POJ-1740" class="headerlink" title="B: POJ - 1740"></a>B: <a href="http://poj.org/problem?id=1740" target="_blank" rel="noopener">POJ - 1740</a></h3><p>题意有点难懂，关键是有相同的柱子是对手可以模仿你的动作，因此可以和你同时清空两根柱子，那么到你就没法走了，因此这个就是必败态。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> total[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n &amp;&amp; n) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(total, <span class="number">0</span>, <span class="keyword">sizeof</span> total);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> t;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">            total[t]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">bool</span> yy = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(total[i] % <span class="number">2</span> != <span class="number">0</span>) yy = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(yy) <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="C-POJ-2234"><a href="#C-POJ-2234" class="headerlink" title="C POJ - 2234"></a>C <a href="http://poj.org/problem?id=2234" target="_blank" rel="noopener">POJ - 2234</a></h3><p>也比较难想，其实也可以看成是对手模仿操作，即如果你的每一手操作对手都可以模仿，直到石子取完，你也是稳输。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pp;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, t;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n &amp;&amp; n) &#123;</span><br><span class="line">        <span class="keyword">bool</span> yy = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">            ans ^= t;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ans != <span class="number">0</span>) yy = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(!yy) <span class="built_in">cout</span> &lt;&lt; <span class="string">"No"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="string">"Yes"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="DPOJ-1082"><a href="#DPOJ-1082" class="headerlink" title="DPOJ - 1082"></a>D<a href="http://poj.org/problem?id=1082" target="_blank" rel="noopener">POJ - 1082</a></h3><p>老实的方法是从最后一天往前推，有个巧妙的方法就是观察到每次无论怎么操作，月份和日期之和的奇偶性总是变化，而最后一天的和又是偶数，所以只有对手特殊日期起手改变奇偶性才可以扭转胜负。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pp;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="keyword">int</span> y, m, d;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; y &gt;&gt; m &gt;&gt; d;</span><br><span class="line">        <span class="keyword">if</span>((m+d) % <span class="number">2</span> == <span class="number">0</span> || (d == <span class="number">30</span> &amp;&amp; (m == <span class="number">9</span> || m == <span class="number">11</span>))) <span class="built_in">cout</span> &lt;&lt; <span class="string">"YES"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="string">"NO"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="EPOJ-2348"><a href="#EPOJ-2348" class="headerlink" title="EPOJ - 2348"></a>E<a href="http://poj.org/problem?id=2348" target="_blank" rel="noopener">POJ - 2348</a></h3><p>也是十分巧妙<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b &amp;&amp; a &amp;&amp; b) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a &lt; b) swap(a, b);</span><br><span class="line">        <span class="keyword">bool</span> yy = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(; ; ) &#123;</span><br><span class="line">            <span class="keyword">if</span>(a % b == <span class="number">0</span> || a - b &gt; b) <span class="keyword">break</span>;</span><br><span class="line">            yy = <span class="number">1</span> - yy;</span><br><span class="line">            a -= b;</span><br><span class="line">            swap(a, b);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(yy == <span class="number">0</span>) <span class="built_in">cout</span> &lt;&lt; <span class="string">"Stan wins"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="string">"Ollie wins"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="FPOJ-2419"><a href="#FPOJ-2419" class="headerlink" title="FPOJ - 2419"></a>F<a href="https://vjudge.net/problem/17247/origin" target="_blank" rel="noopener">POJ - 2419</a></h3><p>单纯判断是否有两人听到结果是否相同即可，用set哦！<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t, p;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; p &gt;&gt; t;</span><br><span class="line">    <span class="keyword">bool</span> y[maxn];</span><br><span class="line">    <span class="built_in">memset</span>(y, <span class="number">0</span>, <span class="keyword">sizeof</span> y);</span><br><span class="line">    <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; pp[maxn];</span><br><span class="line">    <span class="keyword">int</span> ii, jj;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; ii &gt;&gt; jj) &#123;</span><br><span class="line">        pp[ii].insert(jj);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = p;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= p; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(y[i]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt;= p; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(pp[i] == pp[j]) &#123;</span><br><span class="line">                ans--;</span><br><span class="line">                y[j] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="GPOJ-2413"><a href="#GPOJ-2413" class="headerlink" title="GPOJ - 2413"></a>G<a href="http://poj.org/problem?id=2413" target="_blank" rel="noopener">POJ - 2413</a></h3><p>此题纯属乱入，是一道二分加大整数模拟的题目，拿来练练基本功还不错（其实是记错题号了(/▽＼)，不过也有点坑，数据范围其实是10的150次幂）<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ss;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">summ</span><span class="params">(<span class="built_in">string</span> a, <span class="built_in">string</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> ans;</span><br><span class="line">    <span class="keyword">int</span> a1 = a.size(), b1 = b.size();</span><br><span class="line">    <span class="keyword">if</span>(a1 &lt; b1) &#123;</span><br><span class="line">        swap(a, b);</span><br><span class="line">        swap(a1, b1);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> c1 = b1, yu = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; aa;</span><br><span class="line">    <span class="keyword">while</span>(c1 &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        a1 -= <span class="number">1</span>;</span><br><span class="line">        b1 -= <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> t1 = (<span class="keyword">int</span>)(a[a1] - <span class="string">'0'</span>);</span><br><span class="line">        <span class="keyword">int</span> t2 = (<span class="keyword">int</span>)(b[b1] - <span class="string">'0'</span>);</span><br><span class="line">        <span class="keyword">int</span> t3 = t1 + t2 + yu;</span><br><span class="line">        yu = t3 / <span class="number">10</span>;</span><br><span class="line">        t3 %= <span class="number">10</span>;</span><br><span class="line">        aa.push(t3);</span><br><span class="line">        c1--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(a1 &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> t1 = (<span class="keyword">int</span>)a[--a1] - <span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">int</span> t3 = t1 + yu;</span><br><span class="line">        yu = t3 / <span class="number">10</span>;</span><br><span class="line">        t3 %= <span class="number">10</span>;</span><br><span class="line">        aa.push(t3);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(yu != <span class="number">0</span>) aa.push(yu);</span><br><span class="line">    <span class="keyword">while</span>(!aa.empty()) &#123;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; 'k' &lt;&lt; endl;</span></span><br><span class="line">        ans.push_back((<span class="keyword">char</span>)(aa.top() + <span class="string">'0'</span>));</span><br><span class="line">        <span class="comment">//cout &lt;&lt; (char)(aa.top() + '0') &lt;&lt; endl;</span></span><br><span class="line">        aa.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//cout &lt;&lt; 'a' &lt;&lt; ans &lt;&lt; 'a' &lt;&lt; endl;</span></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> s1 = <span class="string">"1"</span>, s2 = <span class="string">"1"</span>, s3;</span><br><span class="line">    <span class="keyword">while</span>(s1.size() &lt;= <span class="number">150</span>) &#123;</span><br><span class="line">        ss.push_back(s1);</span><br><span class="line">        s3 = s1;</span><br><span class="line">        s1 = summ(s1, s2);</span><br><span class="line">        s2 = s3;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="built_in">string</span> a, <span class="built_in">string</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.size() &lt; b.size()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(a.size() &gt; b.size()) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">int</span> a1 = a.size();</span><br><span class="line">        <span class="keyword">int</span> nn = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(nn &lt; a1) &#123;</span><br><span class="line">            <span class="keyword">int</span> t1 = (<span class="keyword">int</span>)(a[nn]-<span class="string">'0'</span>), t2 = (<span class="keyword">int</span>)(b[nn]-<span class="string">'0'</span>);</span><br><span class="line">            <span class="keyword">if</span>(t1 &lt; t2) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(t1 &gt; t2) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">else</span> nn++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bin_find</span><span class="params">(<span class="built_in">string</span> a, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//cout &lt;&lt; 'k' &lt;&lt; endl;</span></span><br><span class="line">    <span class="keyword">if</span>(r - l == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(cmp(a, ss[l])) l++;</span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> t1 = (r + l + <span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(cmp(ss[t1], a)) <span class="keyword">return</span> bin_find(a, l, t1);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> bin_find(a, t1, r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> a, b;</span><br><span class="line">    init();</span><br><span class="line">    <span class="keyword">int</span> s1 = ss.size()<span class="number">-1</span>;</span><br><span class="line">    <span class="comment">//for(int i = 1; i &lt;= 10; i++) cout &lt;&lt; ss[i] &lt;&lt; endl;</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[<span class="number">0</span>] == <span class="string">'0'</span> &amp;&amp; b[<span class="number">0</span>] == <span class="string">'0'</span>) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">int</span> k1 = bin_find(a, <span class="number">0</span>, s1);</span><br><span class="line">        <span class="keyword">int</span> k2 = bin_find(b, <span class="number">0</span>, s1);</span><br><span class="line">        <span class="keyword">if</span>(cmp(ss[k2], b)) k2--;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; k1 &lt;&lt; "    " &lt;&lt; k2 &lt;&lt; endl;</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; k2 - k1 + <span class="number">1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;博弈论作为一种特殊类型的题目，解决途径也与众不同，这就建个专题将它们都收了ψ(｀∇´)ψ&lt;br&gt;还有一个讲解的比较详细的博客转载一波( •̀
      
    
    </summary>
    
      <category term="博弈论" scheme="https://weibolu.online/categories/%E5%8D%9A%E5%BC%88%E8%AE%BA/"/>
    
    
      <category term="专题训练" scheme="https://weibolu.online/tags/%E4%B8%93%E9%A2%98%E8%AE%AD%E7%BB%83/"/>
    
  </entry>
  
  <entry>
    <title>Codeforces Round #547 (Div. 3) 题解</title>
    <link href="https://weibolu.online/2019/03/21/Codeforces-Round-547-Div-3-%E9%A2%98%E8%A7%A3/"/>
    <id>https://weibolu.online/2019/03/21/Codeforces-Round-547-Div-3-题解/</id>
    <published>2019-03-20T16:25:31.000Z</published>
    <updated>2019-03-21T03:35:28.868Z</updated>
    
    <content type="html"><![CDATA[<p>又到了我最喜欢的cf环节了，而且还是最简单的div3，说实在的div3的难度很低了，只要脑子清醒，完全可以AK（￣︶￣）↗　，不过也有点考验手速啦。</p><h2 id="A题"><a href="#A题" class="headerlink" title="A题"></a>A题</h2><h3 id="题目大意："><a href="#题目大意：" class="headerlink" title="题目大意："></a>题目大意：</h3><p>判断一个数能否通过与2，3相乘得到另一个数字。</p><h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>清晰的题意，简单的数据，水题</p><h3 id="code"><a href="#code" class="headerlink" title="code"></a>code</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll a, b;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b) &#123;</span><br><span class="line">        <span class="keyword">if</span>(b % a != <span class="number">0</span>) &#123;<span class="built_in">cout</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="built_in">endl</span>; <span class="keyword">continue</span>;&#125;</span><br><span class="line">        ll c = b/a;</span><br><span class="line">        ll num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(c % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            num++;</span><br><span class="line">            c /= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(c % <span class="number">3</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            num++;</span><br><span class="line">            c /= <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(c == <span class="number">1</span>) <span class="built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="B题"><a href="#B题" class="headerlink" title="B题"></a>B题</h2><h3 id="题目大意：-1"><a href="#题目大意：-1" class="headerlink" title="题目大意："></a>题目大意：</h3><p>一天N个小时，每个小时可以工作或休息，求最多可以连续休息几个小时。</p><h3 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h3><p>只要把一天看作一个周期，将两个周期连续起来就可以了。</p><h3 id="code-1"><a href="#code-1" class="headerlink" title="code"></a>code</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2e5</span> + <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> ti[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n) &#123;</span><br><span class="line">        <span class="keyword">int</span> t0 = <span class="number">0</span>, t1 = <span class="number">0</span>, t2 = <span class="number">0</span>, maxm  = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">bool</span> y = <span class="number">0</span>;</span><br><span class="line">        ti[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; ti[i];</span><br><span class="line">            <span class="keyword">if</span>(y == <span class="number">0</span> &amp;&amp; ti[i] == <span class="number">1</span>) t0++;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(y == <span class="number">0</span>) y = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(ti[i] == <span class="number">1</span>) &#123;</span><br><span class="line">                t1++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(ti[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>(maxm &lt; t1) maxm = t1;</span><br><span class="line">                t1 = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = n; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span>(ti[i] == <span class="number">1</span>) t2++;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(t0 + t2 &gt; maxm) maxm = t0 + t2;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; maxm &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="C题"><a href="#C题" class="headerlink" title="C题"></a>C题</h2><h3 id="题目大意：-2"><a href="#题目大意：-2" class="headerlink" title="题目大意："></a>题目大意：</h3><p>给定一个N，已知一个数组中元素为1——N,但顺序未知，给出其所有相邻两项的差，求原数组。</p><h3 id="分析-2"><a href="#分析-2" class="headerlink" title="分析"></a>分析</h3><p>猛地一看有点懵逼，但仔细一想就明白了，将最小值定为1或将最大值定为N，求出其它元素，看是否符合要求即可。<br>emmmm这道题有点坑，虽然差值不会越界，但结果可能超出int的范围，但当时没想到，于是第二天就被hack了，嘤嘤嘤。</p><h3 id="code-2"><a href="#code-2" class="headerlink" title="code"></a>code</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> cha[maxn];</span><br><span class="line">ll ans[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n) &#123;</span><br><span class="line">        <span class="built_in">set</span>&lt;ll&gt; ss;</span><br><span class="line">        ll minn = <span class="number">1</span>, maxm = <span class="number">1</span>;</span><br><span class="line">        ans[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">bool</span> yy = <span class="number">0</span>;</span><br><span class="line">        ss.insert(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;cha[i]);</span><br><span class="line">            ans[i] = ans[i<span class="number">-1</span>] + cha[i];</span><br><span class="line">            <span class="keyword">if</span>(ss.count(ans[i])) yy = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> ss.insert(ans[i]);</span><br><span class="line">            <span class="keyword">if</span>(ans[i] &gt; maxm) maxm = ans[i];</span><br><span class="line">            <span class="keyword">if</span>(ans[i] &lt; minn) minn = ans[i];</span><br><span class="line">        &#125;</span><br><span class="line">        ll tt = <span class="number">1</span> - minn;</span><br><span class="line">        <span class="keyword">if</span>(yy == <span class="number">1</span> || (ll)tt + maxm &gt; n) &#123;<span class="built_in">cout</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="built_in">endl</span>; <span class="keyword">continue</span>;&#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; ans[i] + tt &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="D题"><a href="#D题" class="headerlink" title="D题"></a>D题</h2><h3 id="题目大意：-3"><a href="#题目大意：-3" class="headerlink" title="题目大意："></a>题目大意：</h3><p>给定两个字符串，求最多可以有几对匹配的字符，其中？可以与任何字符匹配，字母只能与其相同的字符匹配。</p><h3 id="分析-3"><a href="#分析-3" class="headerlink" title="分析"></a>分析</h3><p>额，这题我跳了。。。是队友写的，不过好像计数就可以过？也不是太难吧。</p><h3 id="code-3"><a href="#code-3" class="headerlink" title="code"></a>code</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">150001</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,a[<span class="number">27</span>][maxn],b[<span class="number">27</span>][maxn],dd[maxn][<span class="number">2</span>];</span><br><span class="line"><span class="built_in">string</span> c;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">min</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a&lt;b) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m,aa=<span class="number">1</span>,bb=<span class="number">1</span>,flag=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;c;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(c[i]==<span class="string">'?'</span>)</span><br><span class="line">            c[i]=<span class="string">'z'</span>+<span class="number">1</span>;</span><br><span class="line">        a[c[i]-<span class="string">'a'</span>][<span class="number">0</span>]++;</span><br><span class="line">        a[c[i]-<span class="string">'a'</span>][a[c[i]-<span class="string">'a'</span>][<span class="number">0</span>]]=i+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;c;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(c[i]==<span class="string">'?'</span>)</span><br><span class="line">            c[i]=<span class="string">'z'</span>+<span class="number">1</span>;</span><br><span class="line">        b[c[i]-<span class="string">'a'</span>][<span class="number">0</span>]++;</span><br><span class="line">        b[c[i]-<span class="string">'a'</span>][b[c[i]-<span class="string">'a'</span>][<span class="number">0</span>]]=i+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">27</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i][<span class="number">0</span>]==b[i][<span class="number">0</span>])&#123;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">26</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span>(a[<span class="number">26</span>][<span class="number">0</span>]&amp;&amp;b[<span class="number">26</span>][<span class="number">0</span>])</span><br><span class="line">                &#123;</span><br><span class="line">                    dd[flag][<span class="number">0</span>]=a[<span class="number">26</span>][aa];dd[flag][<span class="number">1</span>]=b[<span class="number">26</span>][bb];</span><br><span class="line">                    aa++;</span><br><span class="line">                    a[<span class="number">26</span>][<span class="number">0</span>]--;</span><br><span class="line">                    bb++;</span><br><span class="line">                    b[<span class="number">26</span>][<span class="number">0</span>]--;</span><br><span class="line">                    flag++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=a[i][<span class="number">0</span>];j++)&#123;</span><br><span class="line">                    dd[flag][<span class="number">0</span>]=a[i][j];dd[flag][<span class="number">1</span>]=b[i][j];</span><br><span class="line">                    flag++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=min(a[i][<span class="number">0</span>],b[i][<span class="number">0</span>]);j++)&#123;</span><br><span class="line">                dd[flag][<span class="number">0</span>]=a[i][j];dd[flag][<span class="number">1</span>]=b[i][j];</span><br><span class="line">                flag++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(a[i][<span class="number">0</span>]&lt;b[i][<span class="number">0</span>])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(a[<span class="number">26</span>][<span class="number">0</span>])</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">while</span>(a[<span class="number">26</span>][<span class="number">0</span>]&amp;&amp;(b[i][<span class="number">0</span>]-a[i][<span class="number">0</span>]))</span><br><span class="line">                    &#123;</span><br><span class="line">                        dd[flag][<span class="number">0</span>]=a[<span class="number">26</span>][aa];dd[flag][<span class="number">1</span>]=b[i][a[i][<span class="number">0</span>]+<span class="number">1</span>];</span><br><span class="line">                        aa++;</span><br><span class="line">                        a[i][<span class="number">0</span>]++;</span><br><span class="line">                        a[<span class="number">26</span>][<span class="number">0</span>]--;</span><br><span class="line">                        flag++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(b[<span class="number">26</span>][<span class="number">0</span>])</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">while</span>(b[<span class="number">26</span>][<span class="number">0</span>]&amp;&amp;(a[i][<span class="number">0</span>]-b[i][<span class="number">0</span>]))</span><br><span class="line">                    &#123;</span><br><span class="line">                        dd[flag][<span class="number">0</span>]=a[i][b[i][<span class="number">0</span>]+<span class="number">1</span>];dd[flag][<span class="number">1</span>]=b[<span class="number">26</span>][bb];</span><br><span class="line">                        bb++;</span><br><span class="line">                        b[i][<span class="number">0</span>]++;</span><br><span class="line">                        b[<span class="number">26</span>][<span class="number">0</span>]--;</span><br><span class="line">                        flag++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;flag&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;flag;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,dd[i][<span class="number">0</span>],dd[i][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="E题"><a href="#E题" class="headerlink" title="E题"></a>E题</h2><h3 id="题目大意：-4"><a href="#题目大意：-4" class="headerlink" title="题目大意："></a>题目大意：</h3><p>给出怪物血量，以及一个周期数组，周期内每次可以造成不同伤害（可能为负），问什么时间可以消灭怪兽。</p><h3 id="分析-4"><a href="#分析-4" class="headerlink" title="分析"></a>分析</h3><p>作为炉石玩家的我，一眼就看穿了这道题目φ(*￣0￣)，找到周期内的斩杀线，再算出一个周期固定伤害即可，水题。</p><h3 id="code-4"><a href="#code-4" class="headerlink" title="code"></a>code</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2e5</span> + <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> d[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll h;</span><br><span class="line">    ll n;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; h &gt;&gt; n) &#123;</span><br><span class="line">        ll minn = <span class="number">999999999</span>;</span><br><span class="line">        ll ti = <span class="number">0</span>, tt, t1;</span><br><span class="line">        ll sum = <span class="number">0</span>, tp, a;</span><br><span class="line">        <span class="keyword">bool</span> yy = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;d[i]);</span><br><span class="line">            sum += d[i];</span><br><span class="line">            <span class="keyword">if</span>(sum &lt; minn) &#123;minn = sum; tt = i;&#125;</span><br><span class="line">            <span class="keyword">if</span>(h &lt;= -sum &amp;&amp; yy == <span class="number">0</span>) &#123;yy = <span class="number">1</span>; t1 = i;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(yy == <span class="number">1</span>) &#123;<span class="built_in">cout</span> &lt;&lt; t1 &lt;&lt; <span class="built_in">endl</span>; <span class="keyword">continue</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>((h &gt; minn || minn &lt;= <span class="number">0</span>) &amp;&amp; sum &gt;= <span class="number">0</span>) &#123;<span class="built_in">cout</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="built_in">endl</span>; <span class="keyword">continue</span>;&#125;</span><br><span class="line">        tp = h + minn;</span><br><span class="line">        sum = -sum;</span><br><span class="line">        <span class="keyword">if</span>(tp % sum == <span class="number">0</span>) a = tp / sum;</span><br><span class="line">        <span class="keyword">else</span> a = tp / sum + <span class="number">1</span>;</span><br><span class="line">        ti += a*n;</span><br><span class="line">        h = h - a*sum;</span><br><span class="line">        sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            sum += d[i];</span><br><span class="line">            <span class="keyword">if</span>(h &lt;= -sum &amp;&amp; yy == <span class="number">0</span>) &#123;yy = <span class="number">1</span>; t1 = i;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ti += t1;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ti &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="F题"><a href="#F题" class="headerlink" title="F题"></a>F题</h2><h3 id="题目大意：-5"><a href="#题目大意：-5" class="headerlink" title="题目大意："></a>题目大意：</h3><p>给出一个数组，问数组中相同的区间和的区间有多少个，区间长度可以为1，且区间不能交叉。</p><h3 id="分析-5"><a href="#分析-5" class="headerlink" title="分析"></a>分析</h3><p>不会(っ °Д °;)っ。。。日常不能AK系列，看了大佬的代码似乎暴力就过了？N方的时间复杂度，数据还这么小，emmm血亏。</p><h3 id="code-5"><a href="#code-5" class="headerlink" title="code"></a>code</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;m;</span><br><span class="line"><span class="keyword">int</span> n,v[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">cin</span>&gt;&gt;v[i],v[i]+=v[i - <span class="number">1</span>];</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;temp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&gt;=<span class="number">1</span>;j--)&#123;</span><br><span class="line"><span class="keyword">int</span> res = v[i]-v[j<span class="number">-1</span>];</span><br><span class="line"><span class="keyword">if</span>(temp[res]&lt;j)&#123;</span><br><span class="line">                temp[res]=i;</span><br><span class="line">m[res]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;::iterator it=m.begin();it!=m.end();it++)&#123;</span><br><span class="line"><span class="keyword">if</span>(it-&gt;second&gt;m[ans])ans=it-&gt;first;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;m[ans]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">int</span> r=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&gt;r;j--)&#123;</span><br><span class="line"><span class="keyword">if</span> (v[i]-v[j<span class="number">-1</span>]==ans)&#123;</span><br><span class="line">r=i;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;j&lt;&lt;<span class="string">' '</span>&lt;&lt;i&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="G题"><a href="#G题" class="headerlink" title="G题"></a>G题</h2><h3 id="题目大意：-6"><a href="#题目大意：-6" class="headerlink" title="题目大意："></a>题目大意：</h3><p>N个点，N-1条边，对边进行染色，其中K个点的边可以有重复颜色，问最少需要多少颜色。</p><h3 id="分析-6"><a href="#分析-6" class="headerlink" title="分析"></a>分析</h3><p>当时感觉这道题好眼熟，但实际上比我见过的那道简单一点，它并不像一般的染色问题需要回溯，只要找到颜色数一个点一个点染就好了，度数超过颜色数的一定有重色，否则一定没有，这样也就找到颜色数了，把点按度数从大到小排序，第K+1个就是啦。然而但是没有时间写了，而且也没太想明白ヽ(*。&gt;Д&lt;)o゜</p><h3 id="code-6"><a href="#code-6" class="headerlink" title="code"></a>code</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">200010</span>;</span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> id, u;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; a[maxn];</span><br><span class="line"><span class="keyword">int</span> tt;</span><br><span class="line"><span class="keyword">int</span> in[maxn], ans[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a[v].size(); i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> id = a[v][i].id;</span><br><span class="line">        <span class="keyword">int</span> en = a[v][i].u;</span><br><span class="line">        <span class="keyword">if</span>(en == c) <span class="keyword">continue</span>;</span><br><span class="line">        ans[id] = b;</span><br><span class="line">        b++;</span><br><span class="line">        <span class="keyword">if</span>(b &gt; tt) b -= tt;</span><br><span class="line">        dfs(en, b, v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> u, v;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="built_in">memset</span>(in, <span class="number">0</span>, <span class="keyword">sizeof</span> in);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;u, &amp;v);</span><br><span class="line">        a[u].push_back(&#123;i, v&#125;);</span><br><span class="line">        a[v].push_back(&#123;i, u&#125;);</span><br><span class="line">        in[u]++;</span><br><span class="line">        in[v]++;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(in+<span class="number">1</span>, in+n+<span class="number">1</span>);</span><br><span class="line">    tt = in[n - k];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; tt &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) <span class="built_in">printf</span>(<span class="string">"%d "</span>, ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>div3不愧是div3呀，题目真的水，终于要上蓝名了，激动！！！PS:颜文字真好玩，才发现WIN10的颜文字(●’◡’●)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;又到了我最喜欢的cf环节了，而且还是最简单的div3，说实在的div3的难度很低了，只要脑子清醒，完全可以AK（￣︶￣）↗　，不过也有点考验手速啦。&lt;/p&gt;
&lt;h2 id=&quot;A题&quot;&gt;&lt;a href=&quot;#A题&quot; class=&quot;headerlink&quot; title=&quot;A题&quot;&gt;&lt;/
      
    
    </summary>
    
      <category term="cf上分之路" scheme="https://weibolu.online/categories/cf%E4%B8%8A%E5%88%86%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="codeforces" scheme="https://weibolu.online/tags/codeforces/"/>
    
  </entry>
  
  <entry>
    <title>数论4 —— 欧拉函数</title>
    <link href="https://weibolu.online/2019/03/14/%E6%95%B0%E8%AE%BA4%20%E2%80%94%E2%80%94%20%E6%AC%A7%E6%8B%89%E5%87%BD%E6%95%B0/"/>
    <id>https://weibolu.online/2019/03/14/数论4 —— 欧拉函数/</id>
    <published>2019-03-14T02:29:25.000Z</published>
    <updated>2019-04-15T08:31:42.553Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在掌握了之前的几种算法后，终于到了问题的核心：欧拉函数<br>这篇博客中借鉴了以下博客内容(毕竟自己太菜，整理不全)：<br><a href="https://www.cnblogs.com/linyujun/p/5194170.html" target="_blank" rel="noopener">这篇博客里还有欧拉函数在指数取模中的应用</a><br><a href="https://blog.csdn.net/RaAlGhul/article/details/51778583" target="_blank" rel="noopener">https://blog.csdn.net/RaAlGhul/article/details/51778583</a></p><h2 id="欧拉函数"><a href="#欧拉函数" class="headerlink" title="欧拉函数"></a>欧拉函数</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>欧拉函数的意义为；对于一个正整数n, 小于n且和n互质的正整数的个数，记为φ(n)  (注：φ(1) = 1)</p><h3 id="性质"><a href="#性质" class="headerlink" title="性质"></a>性质</h3><ol><li><p>如果n是一个质数，那么比n小的数都和它互质，也就是说φ(n) = n-1。</p></li><li><p>如果n是一个质数p的幂，即n = p^k，则φ(n) = p^k-p^(k-1) = (p-1)*p^(k-1)</p></li></ol><p>证明：n只与不是p的倍数的数互质，n = p^k = (p)p^(k-1)，也就是说在1~n的范围内有p^(k-1)个数是p的倍数，所以φ(n) = p^k-p^(k-1) = (p-1)p^(k-1)。</p><ol start="3"><li><p>当n,m互质的时候，φ(nm) = φ(n)φ(m)。</p></li><li><p>一个数可以分成几个质因子的幂的乘积，运用性质2,3，我们可以推出一个公式：</p></li></ol><p>φ(n)=(p1-1)(p2-1)…(pi-1)(p1^(a1-1))(p2^(a2-1))…(pi^(ai-1))</p><p>= k(p1-1)(p2-1)…(pi-1)/(p1p2…pi)</p><p>= k(1-1/p1)(1-1/p2)…(1-1/pk)</p><ol start="5"><li>同样，根据性质2,3，我们可以推出一个递推公式：</li></ol><p>对于质数p:   (注 phi(i) 即 φ(i) )<br>如果i mod p = 0, 那么 phi(i <em> p) = phi(i)p<br>若i mod p ≠0,  那么 phi(i </em> p) = phi(i)(p-1) </p><ol start="6"><li>还有一个特殊的性质：phi(i) 均为偶数</li></ol><p>在ACM编程中，如果是求单个的欧拉函数的时候，我们选择用性质4,5都行，但是如果需要预处理的话我们一般选择用性质5，因为性质5强调的是相互之间的关系，可以运用递推叠上去</p><h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h3><p>了解了性质后，我们应该如何求欧拉函数呢？紫皮书中给出了代码：</p><h4 id="求解单个欧拉函数值phi-n"><a href="#求解单个欧拉函数值phi-n" class="headerlink" title="求解单个欧拉函数值phi(n)"></a>求解单个欧拉函数值phi(n)</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">euler_phi</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m = (<span class="keyword">int</span>)<span class="built_in">sqrt</span>(n+<span class="number">0.5</span>);</span><br><span class="line">    <span class="keyword">int</span> ans = n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= m; i++) <span class="keyword">if</span>(n % i == <span class="number">0</span>) &#123;</span><br><span class="line">        ans = ans / i * (i<span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">while</span>(n % i == <span class="number">0</span>) n /= i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n &gt; <span class="number">1</span>) ans = ans / n * (n<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>显然利用的是上面的性质4，也可以从容斥定理的角度来理解，时间复杂度为O（√n）。</p><h4 id="打表求解多个欧拉函数值"><a href="#打表求解多个欧拉函数值" class="headerlink" title="打表求解多个欧拉函数值"></a>打表求解多个欧拉函数值</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">phi_table</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>* phi)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) phi[i] = <span class="number">0</span>;</span><br><span class="line">    phi[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) <span class="keyword">if</span>(!phi[i])</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt;= n; j += i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!phi[j]) phi[j] = j;</span><br><span class="line">        phi[j] = phi[j] /i * (i<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个是类似之前的素数筛的算法，时间复杂度为O(nloglogn)。<br>利用性质5可以得到比其更快的算法QAQ</p><h4 id="线性筛"><a href="#线性筛" class="headerlink" title="线性筛"></a>线性筛</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> phi[N], prime[N];</span><br><span class="line"><span class="keyword">int</span> tot;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Euler</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    phi[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!phi[i]) &#123;</span><br><span class="line">            phi[i] = i<span class="number">-1</span>;</span><br><span class="line">            prime[tot ++] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; tot &amp;&amp; <span class="number">111</span>*i*prime[j] &lt; N; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i % prime[j]) phi[i * prime[j]] = phi[i] * (prime[j] - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                phi[i * prime[j]] = phi[i] * prime[j];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><p>之后再去找个经典题目，先去碎觉。。。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;在掌握了之前的几种算法后，终于到了问题的核心：欧拉函数&lt;br&gt;这篇博客中借鉴了以下博客内容(毕竟自己太菜，整理不全)：&lt;br&gt;&lt;a href
      
    
    </summary>
    
      <category term="基础数论" scheme="https://weibolu.online/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E8%AE%BA/"/>
    
    
      <category term="ACM模板" scheme="https://weibolu.online/tags/ACM%E6%A8%A1%E6%9D%BF/"/>
    
      <category term="基础数论" scheme="https://weibolu.online/tags/%E5%9F%BA%E7%A1%80%E6%95%B0%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>数论3 —— 中国剩余定理</title>
    <link href="https://weibolu.online/2019/03/14/%E6%95%B0%E8%AE%BA3%20%E2%80%94%E2%80%94%20%E4%B8%AD%E5%9B%BD%E5%89%A9%E4%BD%99%E5%AE%9A%E7%90%86/"/>
    <id>https://weibolu.online/2019/03/14/数论3 —— 中国剩余定理/</id>
    <published>2019-03-14T02:25:43.000Z</published>
    <updated>2019-04-15T08:31:37.575Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>刚学习c语言时有这么一道题目，韩信点兵：军队人数未知，但三人站成一列剩余2人，5人站成一列剩余4人，7人站成一列剩余3人，求军队至少有多少人？<br>虽然当时是直接遍历求解的，但实际上这个问题可以转化为一个同余方程组：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x ≡ <span class="number">2</span> (mod <span class="number">3</span>);</span><br><span class="line">x ≡ <span class="number">4</span> (mod <span class="number">5</span>);</span><br><span class="line">x ≡ <span class="number">3</span> (mod <span class="number">7</span>);</span><br></pre></td></tr></table></figure></p><p>而<strong>中国剩余定理</strong>就是来求解这种同余方程组<br>的，又称CRT（Chinese Remainder Theorem）。</p><p>在此之前我们要先回顾下之前的拓展欧几里德算法：<a href="https://weibolu.online/2019/03/11/gcd%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/">gcd 与 exgcd</a></p><h2 id="中国剩余定理"><a href="#中国剩余定理" class="headerlink" title="中国剩余定理"></a>中国剩余定理</h2><h3 id="基本形式"><a href="#基本形式" class="headerlink" title="基本形式"></a>基本形式</h3><p>首先考虑最简单的一种情况：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x ≡ a1 (mod p1);</span><br><span class="line">x ≡ a2 (mod p2);</span><br><span class="line">gcd(p1, p2) = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></p><p>首先将上式变形为： x = a1 + k1p1  &amp;&amp; x = a2 + k2p2;<br>消去x得： a1 + k1p1 = a2 + k2p2;<br>整理得： p1k2 - p2k2 = a2 - a1;<br>这不就是一个普通的二元一次方程了嘛，又有gac(p1, p2) = 1，根据我们之前学到的内容，用exgcd算法可以很容易得到一组特解 (k1’, k2’)，从而得到它的通解为：<br>k1 = p2t + k1’,     k2 = p1t + k2’;    (t为任意整数)<br>同时对于(k1’, k2’)我们也能得到一个特解 x0。<br>我们将k1代入到 x = a1 + k1p1中去，可以得到：<br>x = a1 + k1’p1 + p1p2t，即x = x0 + p1p2t;<br>它其实就等价于 x ≡ x0 (mod p1p2), 这样我们就将原方程合并为了新的方程，那么如果有n个同余方程，且模数两两互质，我们就可以将其合并为：<br>x ≡ x0 (mod p1p2……pn)，x0同样是一个特解。<br>我们也能看出上述方程在区间[0, p1p2……pn)上<strong>有且仅有</strong>一个解。</p><h4 id="最终表述"><a href="#最终表述" class="headerlink" title="最终表述"></a>最终表述</h4><p>设正整数p1, p2, ……, pn两两互素，则同余方程组：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x ≡ a1 (mod p1);</span><br><span class="line">x ≡ a2 (mod p2);</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">x ≡ an (mod pn);</span><br></pre></td></tr></table></figure></p><p>有整数解，且在模 M = p1p2p3……pn下解是唯一的，解为：<br>x ≡ (a1M1T1 + a2M2T2 + …… + anMnTn) mod M;<br>其中Mi = M / pi, Ti 为 Mi mod pi 的逆元。</p><h4 id="模板代码"><a href="#模板代码" class="headerlink" title="模板代码"></a>模板代码</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exgcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span>&amp; x, <span class="keyword">int</span>&amp; y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!b) &#123;x = <span class="number">1</span>; y = <span class="number">0</span>;&#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        exgcd(b, a%b, y, x);</span><br><span class="line">        y -= x * (a/b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CRT</span><span class="params">(<span class="keyword">int</span> a[],<span class="keyword">int</span> m[],<span class="keyword">int</span> n)</span></span>&#123;      <span class="comment">//x ≡ a[i] (mod m[i])</span></span><br><span class="line">  <span class="keyword">int</span> M = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">    M *= m[i];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)&#123;</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">int</span> Mi = M / m[i];</span><br><span class="line">    exgcd(Mi, m[i], x, y);           <span class="comment">//Mi模mi的逆元</span></span><br><span class="line">    ans = (ans + Mi * x * a[i]) % M;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(ans &lt; <span class="number">0</span>) ans += M;</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="拓展形式"><a href="#拓展形式" class="headerlink" title="拓展形式"></a>拓展形式</h3><p>上述情况是在模数p1, p2, ……, pn两两互素的基础上推导出的，如果去掉这一条件呢？<br>同样先考虑最简单的一种情况：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x ≡ a1 (mod p1);</span><br><span class="line">x ≡ a2 (mod p2);</span><br></pre></td></tr></table></figure></p><p>和之前一样的操作，我们可以得到这个方程：a1 + k1p1 = a2 + k2p2;<br>但此时方程不一定有整数解，根据裴蜀定理，如果 gcd(p1, p2) % (a2 - a1) = 0, 则有整数解。我们先假设它满足这个条件，并且已经求出一组特解(k1’, k2’)。<br>设g = gcd(p1, p2)，则上述方程可化为：k1(p1/g) - k2(p2/g) = (a2 - a1)/g<br>这样p1/g  与  p2/g互素，就可以按照之前的处理方式解决了，得到通解为:<br>k1 = (p2/g)t + k1’           k2 = (p1/g)t + k2’<br>再次回代后可得:  x = x0 + lcm(p1, p2) * t;<br>等价于方程:  x ≡ x0 (mod lcm(p1, p2));</p><h4 id="最终表述-1"><a href="#最终表述-1" class="headerlink" title="最终表述"></a>最终表述</h4><p>有n个同余方程，我们就可以将其合并为：<br>x ≡ x0 (mod lcm(p1, p2, ……, pn))，x0同样是一个特解。</p><h4 id="模板代码-1"><a href="#模板代码-1" class="headerlink" title="模板代码"></a>模板代码</h4><p>其实仔细想想和CRT没什么大的区别，稍微改下就好了呀，那么模板。。。咕咕咕<br>友情链接（我觉得讲的非常好）：<br><a href="http://blog.miskcoo.com/2014/09/chinese-remainder-theorem" target="_blank" rel="noopener">中国剩余定理</a><br><a href="https://blog.csdn.net/guhaiteng/article/details/52792251" target="_blank" rel="noopener">模板题目解析</a><br>之后在在下面补一个ex_CRT的题目吧，to be continue……</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;刚学习c语言时有这么一道题目，韩信点兵：军队人数未知，但三人站成一列剩余2人，5人站成一列剩余4人，7人站成一列剩余3人，求军队至少有多少人
      
    
    </summary>
    
      <category term="基础数论" scheme="https://weibolu.online/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E8%AE%BA/"/>
    
    
      <category term="ACM模板" scheme="https://weibolu.online/tags/ACM%E6%A8%A1%E6%9D%BF/"/>
    
      <category term="基础数论" scheme="https://weibolu.online/tags/%E5%9F%BA%E7%A1%80%E6%95%B0%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>Codeforces Round #546 (Div. 2) 题解</title>
    <link href="https://weibolu.online/2019/03/12/Codeforces-Round-546-Div-2-%E9%A2%98%E8%A7%A3/"/>
    <id>https://weibolu.online/2019/03/12/Codeforces-Round-546-Div-2-题解/</id>
    <published>2019-03-12T12:16:11.000Z</published>
    <updated>2019-03-21T03:38:03.935Z</updated>
    
    <content type="html"><![CDATA[<p>开个新专题，把cf的题目都记录下来，顺便上上分，舒服。</p><h2 id="A题"><a href="#A题" class="headerlink" title="A题"></a>A题</h2><h3 id="题目大意："><a href="#题目大意：" class="headerlink" title="题目大意："></a>题目大意：</h3><p>给定n个章节的区间和现在的阅读进度，输出尚未读完的章节。</p><h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>水题。。。</p><h3 id="code"><a href="#code" class="headerlink" title="code"></a>code</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     <span class="keyword">int</span> n;</span><br><span class="line">     <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n) &#123;</span><br><span class="line">        <span class="keyword">int</span> l[<span class="number">150</span>], r[<span class="number">150</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; l[i] &gt;&gt; r[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> now;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; now;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = n; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span>(l[i] &gt;= now) ans++;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(r[i] &gt;= now) ans++;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="B题"><a href="#B题" class="headerlink" title="B题"></a>B题</h2><h3 id="题目大意：-1"><a href="#题目大意：-1" class="headerlink" title="题目大意："></a>题目大意：</h3><p>有n个井，井下有钥匙，井上有石头，单位时间内只能选择A:向相邻位置移动，B:将一块石头移向旁边一个井，C:打开一个没有石头的井盖取出钥匙，三中操作中的一种。给出起始所在的井盖位置，求最短用时多少可以取出所有钥匙。</p><h3 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h3><p>取出第一个井里的钥匙时必然会使旁边井上变为两个石头，即最初的两个井用时一定为6，之后所有井只要按照顺序取钥匙用时都为2，所以问题化解为取过前两个钥匙后（即从起始位置移动一格后）怎样最快把所有位置都走一遍，贪心朝近的那端走就行了。（ps:也有可能开始就在一端，分类出来即可）</p><h3 id="code-1"><a href="#code-1" class="headerlink" title="code"></a>code</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     <span class="keyword">int</span> n, k, ans = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k) &#123;</span><br><span class="line">        <span class="keyword">if</span>(k == <span class="number">1</span> || k == n) &#123;</span><br><span class="line">            ans = <span class="number">6</span>+(n<span class="number">-2</span>)*<span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(k &lt;= n/<span class="number">2</span> &amp;&amp; k &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">            ans = <span class="number">3</span>+n+k+(n<span class="number">-2</span>)*<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            ans = <span class="number">6</span>+(n-(k+<span class="number">1</span>))+(n<span class="number">-1</span>)+(n<span class="number">-2</span>)*<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="C题"><a href="#C题" class="headerlink" title="C题"></a>C题</h2><h3 id="题目大意：-2"><a href="#题目大意：-2" class="headerlink" title="题目大意："></a>题目大意：</h3><p>给定一个矩阵，可以将其中任意一个子方阵进行转置，问能否通过这种操作得到另一个矩阵。</p><h3 id="分析-2"><a href="#分析-2" class="headerlink" title="分析"></a>分析</h3><p>尝试几次后发现方阵转置并不影响其<strong>副对角线</strong>（即从左下到右上）上的元素，即矩阵的每条副对角线上的元素都是固定的，检查其是否相同即可。</p><h3 id="code-2"><a href="#code-2" class="headerlink" title="code"></a>code</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">520</span>][<span class="number">520</span>], b[<span class="number">520</span>][<span class="number">520</span>];</span><br><span class="line"><span class="keyword">int</span> a1[<span class="number">1000</span>], b1[<span class="number">1000</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;b[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">bool</span> y = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">2</span>; j &lt;= m+n; j++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= j<span class="number">-1</span>; k++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(k &gt; n || j-k &gt; m) <span class="keyword">continue</span>;</span><br><span class="line">                a1[k] = a[k][j-k];</span><br><span class="line">                b1[k] = b[k][j-k];</span><br><span class="line">            &#125;</span><br><span class="line">            sort(a1+<span class="number">1</span>, a1+j);</span><br><span class="line">            sort(b1+<span class="number">1</span>, b1+j);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= j<span class="number">-1</span>; k++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(a1[k] != b1[k]) &#123;</span><br><span class="line">                    y = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(y == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(y == <span class="number">0</span>) <span class="built_in">cout</span> &lt;&lt; <span class="string">"NO"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="string">"YES"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ps:这种写法有点笨，事后发现可以用 vector&lt;map&lt;int, int&gt; &gt; 来存(如下所示，十分简洁)，可直接判断是否相同。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; mapa(<span class="number">1200</span>);</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; mapb(<span class="number">1200</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m, n, p;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;p);</span><br><span class="line">                mapa[i+j][p]++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;p);</span><br><span class="line">                mapb[i+j][p]++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(mapa == mapb) <span class="built_in">cout</span> &lt;&lt; <span class="string">"yes"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="string">"no"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="D题"><a href="#D题" class="headerlink" title="D题"></a>D题</h2><h3 id="题目大意：-3"><a href="#题目大意：-3" class="headerlink" title="题目大意："></a>题目大意：</h3><p>有n个人在排队，给出他们此时的编号顺序，他们中有些人愿意交换位置(只有相邻再能交换)，给出愿意交换的组合，求最多能让最后一个人的位置向前移动几个位置。</p><h3 id="分析-3"><a href="#分析-3" class="headerlink" title="分析"></a>分析</h3><p>昨天晚上怎么想都觉得这个问题需要O(n²)的时间复杂度，也就没有码完，早上起来看了别人的分析后发现经过巧妙地设计后可以优化为O(m+n)，也就补上了。</p><p>从后向前遍历一遍队伍，fav[i]用来记录从i到最后一人中愿意与i交换的人数，remo记录确定可以与最后一人交换的人数，则对任意位置i，如果满足fav[i] = n - i - remo;就说明i也可以与最后一人交换，remo++;否则将所有愿意与i交换的人的fav值加一，即所有人要么向后移动与最后一人交换，要么向前移动让更多人与最后一人交换。</p><h3 id="code-3"><a href="#code-3" class="headerlink" title="code"></a>code</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">300100</span>;</span><br><span class="line"><span class="keyword">int</span> p[maxn], fav[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ss[maxn];</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; ee[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m, t1, t2, me;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(fav, <span class="number">0</span>, <span class="keyword">sizeof</span> fav);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;p[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        me = p[n];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;t1, &amp;t2);</span><br><span class="line">            <span class="keyword">if</span>(!ee[t2].count(t1))&#123;</span><br><span class="line">                ss[t2].push_back(t1);</span><br><span class="line">                <span class="keyword">if</span>(t2 == me) fav[t1] = <span class="number">1</span>;</span><br><span class="line">                ee[t2].insert(t1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>, remo = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = n<span class="number">-1</span>; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">int</span> tt = n - i - remo;</span><br><span class="line">            <span class="keyword">if</span>(fav[p[i]] == tt) &#123;remo++; ans++;&#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; ss[p[i]].size(); j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    fav[ss[p[i]][j]]++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="E题"><a href="#E题" class="headerlink" title="E题"></a>E题</h2><p>。。。。。。<br>又不是AK大佬，哪里来的E题，整整一个小时都没有A掉D题，所以E题根本没读题，干脆鸽掉算了||—_— （ps: 我要努力几天了，争取下一场打到蓝名)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;开个新专题，把cf的题目都记录下来，顺便上上分，舒服。&lt;/p&gt;
&lt;h2 id=&quot;A题&quot;&gt;&lt;a href=&quot;#A题&quot; class=&quot;headerlink&quot; title=&quot;A题&quot;&gt;&lt;/a&gt;A题&lt;/h2&gt;&lt;h3 id=&quot;题目大意：&quot;&gt;&lt;a href=&quot;#题目大意：&quot; class=
      
    
    </summary>
    
      <category term="cf上分之路" scheme="https://weibolu.online/categories/cf%E4%B8%8A%E5%88%86%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="codeforces" scheme="https://weibolu.online/tags/codeforces/"/>
    
  </entry>
  
  <entry>
    <title>数论2 —— 筛法 &amp; 取模小技巧</title>
    <link href="https://weibolu.online/2019/03/11/%E6%95%B0%E8%AE%BA2%20%E2%80%94%E2%80%94%20Eratosthenes-%E7%AD%9B%E6%B3%95/"/>
    <id>https://weibolu.online/2019/03/11/数论2 —— Eratosthenes-筛法/</id>
    <published>2019-03-11T12:57:02.000Z</published>
    <updated>2019-04-15T16:47:43.820Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>一个十分方便的筛法，可以根据对数字的需要更快速的进行枚举。</p><h2 id="E筛"><a href="#E筛" class="headerlink" title="E筛"></a>E筛</h2><p>筛选区间内的素数，例如：构造1~n之间的素数表。</p><h3 id="算法思想及代码"><a href="#算法思想及代码" class="headerlink" title="算法思想及代码"></a>算法思想及代码</h3><p>对于不超过n的所有非负整数p，删除2p,3p,4p……操作结束后，剩下的就是素数表。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> m = <span class="built_in">sqrt</span>(n+<span class="number">0.5</span>);</span><br><span class="line"><span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span> vis);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= m; i++) <span class="keyword">if</span>(!vis[i]) </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = i*i; j &lt;= n; j += i) vis[j] = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>算法关键的地方在于尽可能的缩短遍历的长度，否则会影响效率。</p><h2 id="线性筛"><a href="#线性筛" class="headerlink" title="线性筛"></a>线性筛</h2><p>比E筛的速度更快一点，可以达到O(n)</p><h3 id="算法如下"><a href="#算法如下" class="headerlink" title="算法如下"></a>算法如下</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">bool</span> prime[maxn];      <span class="comment">//</span></span><br><span class="line"><span class="keyword">int</span> p[maxn], tot;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tot = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(prime, <span class="number">0</span>, <span class="keyword">sizeof</span> prime);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; maxn; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!prime[i]) p[tot++] = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; tot &amp;&amp; i * p[j] &lt; maxn; j++) &#123;</span><br><span class="line">            prime[i * p[j]] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(i % p[j] == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="同余与模算术"><a href="#同余与模算术" class="headerlink" title="同余与模算术"></a>同余与模算术</h2><p>根据mod的特性，容易得到以下公式：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(a+b) mod n = ((a mod n) + (b mod n)) mod n;</span><br><span class="line">(a-b) mod n = ((a mod n) - (b mod n) + n) mod n;</span><br><span class="line">(ab) mod n = (a mod n)(b mod n) mod n;</span><br></pre></td></tr></table></figure></p><p>注意中间结果可能溢出，可进行强制类型转换。</p><p><strong>对于指数数据取mod， 例如求a的n次幂 mod m</strong><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pow_mod</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> n, <span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> x = pow_mod(a, n/<span class="number">2</span>, m);</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans = (<span class="keyword">long</span> <span class="keyword">long</span>)x * x % m;</span><br><span class="line">    <span class="keyword">if</span>(n % <span class="number">2</span> == <span class="number">1</span>) ans = ans * a % m;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>)ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>利用二分法来求解时，可将复杂度降低为O(log n)，就是这些内容啦。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;一个十分方便的筛法，可以根据对数字的需要更快速的进行枚举。&lt;/p&gt;
&lt;h2 id=&quot;E筛&quot;&gt;&lt;a href=&quot;#E筛&quot; class=&quot;hea
      
    
    </summary>
    
      <category term="基础数论" scheme="https://weibolu.online/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E8%AE%BA/"/>
    
    
      <category term="基础数论" scheme="https://weibolu.online/tags/%E5%9F%BA%E7%A1%80%E6%95%B0%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>数论1 —— gcd算法详解</title>
    <link href="https://weibolu.online/2019/03/11/%E6%95%B0%E8%AE%BA1%20%E2%80%94%E2%80%94%20gcd%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/"/>
    <id>https://weibolu.online/2019/03/11/数论1 —— gcd算法详解/</id>
    <published>2019-03-11T09:17:01.000Z</published>
    <updated>2019-04-15T08:31:30.039Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>数论一直是我十分不擅长的一个领域，这次就先按照紫皮书的顺序来初步学习一下基础数论吧！</p><h2 id="欧几里德算法"><a href="#欧几里德算法" class="headerlink" title="欧几里德算法"></a>欧几里德算法</h2><p>这应该是我数论中用过的最多的算法了——辗转相除法，可用来求a与b的最大公约数。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b == <span class="number">0</span> ? a : gcd(b, a%b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同时，也可利用此式求得最小公倍数(注意此处要先除后乘，否则可能溢出)：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lcm</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a/gcd(a, b)*b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>至于gcd的原理就来源于两个等式：gcd(a, b) = gcd(b, a%b) 与 gcd(a, 0) = a, 后者不用多说，前者的证明如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">设 a = b*t1 + t2; (t1, t2均为整数)</span><br><span class="line">假设k是a和b的一个公约数，则a/k(记<span class="string">'/'</span>为整除), b/k;</span><br><span class="line">则必有 t2/k, 又有 t2 = a%b;</span><br><span class="line">故k也是a%b和b的一个公约数，那么它们的最大公约数也必然相同，即 gcd(a, b) = gcd(b, a%b);</span><br></pre></td></tr></table></figure><h2 id="拓展欧几里德算法"><a href="#拓展欧几里德算法" class="headerlink" title="拓展欧几里德算法"></a>拓展欧几里德算法</h2><p>这个算法内容如下：找到一对整数(x, y), 使得ax+by = gcd(a, b),紫书代码如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exgcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span>&amp; d, <span class="keyword">int</span>&amp; x, <span class="keyword">int</span>&amp; y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!b) &#123;d = a; x = <span class="number">1</span>; y = <span class="number">0</span>;&#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        exgcd(b, a%b, d, y, x);</span><br><span class="line">        y -= x*(a/b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在网上找到了如下证明过程：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">可以这样思考: </span><br><span class="line">对于a’ = b, b’ = a % b 而言，我们求得 x, y使得 a’x + b’y = Gcd(a’, b’) </span><br><span class="line">由于b’ = a % b = a – a / b * b (注：这里的/是程序设计语言中的除法) </span><br><span class="line">那么可以得到: </span><br><span class="line">a’x + b’y = Gcd(a’, b’) ==&gt; </span><br><span class="line">bx + (a – a / b * b)y = Gcd(a’, b’) = Gcd(a, b) ==&gt; </span><br><span class="line">ay +b(x – a / b*y) = Gcd(a, b) </span><br><span class="line">因此对于a和b而言，他们的相对应的p，q分别是 y和(x-a/b*y)</span><br></pre></td></tr></table></figure><p>至此，我们可以得出结论：对于方程ax+by = c，当c满足条件c%gcd(a, b)时方程有整数解，反之则没有。这一定理又称为 <strong>“裴蜀定理”</strong>。</p><p><strong>同时，书上提到了利用exgcd求解二元一次方程的方法：对于方程ax+by = c, 若有一组解为(x0, y0), 那么它的任意一组解都可以写为(x0+kb’, y0-ka’), 其中a’ = a/gcd(a, b), b’ = b/gcd(a, b), k为任意常数。</strong></p><h2 id="快速欧几里德算法"><a href="#快速欧几里德算法" class="headerlink" title="快速欧几里德算法"></a>快速欧几里德算法</h2><p>在找资料的过程中，看到了这个算法，应该是用位运算代替了%运算，因此对2的指数型数据运算有优势，但看到几组测试，快速gcd都完败给了普通gcd，也暂时记下来吧。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">kgcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">return</span> b; </span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>) <span class="keyword">return</span> a; </span><br><span class="line">    <span class="keyword">if</span> (!(a &amp; <span class="number">1</span>) &amp;&amp; !(b &amp; <span class="number">1</span>)) </span><br><span class="line">        <span class="keyword">return</span> kgcd(a&gt;&gt;<span class="number">1</span>, b&gt;&gt;<span class="number">1</span>)&lt;&lt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (!(b &amp; <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">return</span> kgcd(a, b&gt;&gt;<span class="number">1</span>); </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (!(a &amp; <span class="number">1</span>)) <span class="keyword">return</span> kgcd(a&gt;&gt;<span class="number">1</span>, b); </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> kgcd(<span class="built_in">abs</span>(a - b), min(a, b)); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="小结-amp-练习"><a href="#小结-amp-练习" class="headerlink" title="小结&amp;练习"></a>小结&amp;练习</h2><p>至此关于gcd的说明都齐全了，接下来我们来找一道题目练习吧：<a href="http://nyoj.top/problem/144" target="_blank" rel="noopener">nyoj 144</a><br>题意很直白，秒选exgcd然后T了。。。发现这道题只需判读是否有解，exgcd有点浪费了，改用gcd，又T了。。。尝试几次后发现是cout &lt;&lt; “No” &lt;&lt; endl;的锅，换成printf就好了，并不懂为什么，代码如下：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b == <span class="number">0</span> ? a : gcd(b, a%b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">int</span> a, b, t, c;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;t);</span><br><span class="line">        <span class="keyword">int</span> d = gcd(a, b);</span><br><span class="line">        <span class="keyword">if</span>(t % d != <span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">"No\n"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"Yes\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;数论一直是我十分不擅长的一个领域，这次就先按照紫皮书的顺序来初步学习一下基础数论吧！&lt;/p&gt;
&lt;h2 id=&quot;欧几里德算法&quot;&gt;&lt;a href
      
    
    </summary>
    
      <category term="基础数论" scheme="https://weibolu.online/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E8%AE%BA/"/>
    
    
      <category term="ACM模板" scheme="https://weibolu.online/tags/ACM%E6%A8%A1%E6%9D%BF/"/>
    
      <category term="基础数论" scheme="https://weibolu.online/tags/%E5%9F%BA%E7%A1%80%E6%95%B0%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>LIFE2 —— 立个Flag</title>
    <link href="https://weibolu.online/2018/12/26/LIFE2%20%E2%80%94%E2%80%94%20%E7%AB%8B%E4%B8%AAFlag/"/>
    <id>https://weibolu.online/2018/12/26/LIFE2 —— 立个Flag/</id>
    <published>2018-12-26T15:04:59.000Z</published>
    <updated>2019-04-24T02:58:14.181Z</updated>
    
    <content type="html"><![CDATA[<p>鉴于自己太菜了以及好久没有好好打代码了，从明天起，寒假的codeforce和训练我一题都不会落下，统统补掉。（ps:坚持到第三场就去买个域名/xyx)</p><h1 id="好好学习-jpg"><a href="#好好学习-jpg" class="headerlink" title="好好学习.jpg"></a>好好学习.jpg</h1>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;鉴于自己太菜了以及好久没有好好打代码了，从明天起，寒假的codeforce和训练我一题都不会落下，统统补掉。（ps:坚持到第三场就去买个域名/xyx)&lt;/p&gt;
&lt;h1 id=&quot;好好学习-jpg&quot;&gt;&lt;a href=&quot;#好好学习-jpg&quot; class=&quot;headerlink&quot; 
      
    
    </summary>
    
      <category term="LIFE" scheme="https://weibolu.online/categories/LIFE/"/>
    
    
      <category term="What is life?" scheme="https://weibolu.online/tags/What-is-life/"/>
    
  </entry>
  
  <entry>
    <title>LIFE1 —— First of all</title>
    <link href="https://weibolu.online/2018/12/26/LIFE1%20%E2%80%94%E2%80%94%20First-of-all/"/>
    <id>https://weibolu.online/2018/12/26/LIFE1 —— First-of-all/</id>
    <published>2018-12-26T04:17:24.000Z</published>
    <updated>2019-04-24T02:57:35.968Z</updated>
    
    <content type="html"><![CDATA[<p>额，这是在网上无意间看到的，突然就有了搭建一个静态博客的想法，刚好以后就可以用这个博客来记录自己学到的一些知识（毕竟老年人记忆力）,然后一些板块还没有设置好，以后会慢慢完善，争取……欢迎……关注。</p><p><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxATDxAPERIVEhUTEQ8QEBAQEBcSEBIQFREWFhUXFRcYHSggGBolGxUVITEhJSkrLy4uFx8zODMsNygtLisBCgoKDg0OGhAQGy0gICYwLS0wKzAtKy8yNzItLi0tNTUvLTUvLTUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsrLf/AABEIALEBHAMBIgACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAAAQMEBQYHAgj/xABKEAACAQMBAwcFCwoDCQAAAAAAAQIDBBEFEiExBgcTQVFhcTKBkaGxCCIjMzRCUmJ0wdEUFSQ1cnOCsrPwQ1PCFhclNlRkotLh/8QAGgEBAAMBAQEAAAAAAAAAAAAAAAIDBAUBBv/EACYRAQACAgEEAAcBAQAAAAAAAAABAgMRBBIhMUEFEyIyUWGBQhT/2gAMAwEAAhEDEQA/AO4gAAAAIAAAAAAAAOP+6PqNWllhtfpE+Dx/hvsOwHH/AHRNGdShY04Rc269R4isvdTA2/mibeiWLbz8HLe/25G4Nmj81tZ09Gs4SWy4wnGSe5p7cuJmLvX6cfnZ7o7yF8lKRu06Tpjtf7Y2z7miNtdpqE+UMn5NNvxZ5/PVx/lr1maedhj2vjh5fw3HbR7yaateqryqXobLu35S03ukpQfesr0kq83Db2jbi5Y9NnBj7fUYSW0pLHbncXVK4jLyZKXg0/YaYmJjcKJiY7SrAgk9eAAAAAAAABJBIAAAAAAIJIAkAAAABAAAAAAAUa9XCAo6hcuMJOC2pY97HOMy6svsOca1oUakukvbipXqveqdJ7FKnnqj3Gz61qjXvYb5Ps4IwNGhJvall78795zuXzej6KeW7jcWLfVk8NYqaJc0IutbVJyivfSoyflLrx2m2aVCnUpQqx4TipeGeou6aSW/2Huwt4QgoQe5Zx523u9JzbZJvH1+WnXRM9HaFenRS4FXCJSPWyIhXNu/d4aKN1Sp7MpTSwk5N46ki8p0zzeWilTnCW5Si4t9zRZGPflHq/DnNrotxfbVxObpUZN9FSjuco54mT0rQKdGadOtWtqi8mqp7dNv68HuwbXSVOEIwi1iMVFJdyKF1CE139TJzyL0ndJ7R6e1x1t2vH9bNpdxOVOPS7O3wk4eTJ9q8TIGj6XqEqUlCW+D3J9cf/huFtWTR1OPyK5q7jyx5sM450uAMg0KQAAAAAJIJAAAAAABBJAEgAAAAIAAAAAeZvCMPPbrTlCL2YReJSXFvsRkbueEaleag6dVqDazvlh9Zk5eTopufC/Bjm9umPLZaOmUY/NTfbLey5UYL6K8yNKnqcn5UpPxk/uCu4/R9OfxMUc6sfbRqnhZJ8y3SWw/ov0HBdW5SXsLyu3NwaqNdFsrYSTwsLwwdOozhLgvavvFTTqMpqcoJyWGp4Taa8SOTkxk7TV7jxfKmdmmdN+S29eqsOpCDnHg4toyMSlUcpJKU5SS+a8JeoqwKp6d7r2hGZnXdUqTa2YwWZS4Z4LvLulpUXh1G5vveI+gspQUsPLTXCS4o9OEn5VWb7liJfjtWPujaq258Sy0LelHhGK8x7959X1GElbU+vL8ZNlrU6JcI+jP4l//AEzHisPK4Jt7lqHOxqlxRuKMKT6Om4bW1FJbc878vu7C/wCbfUry4pVpylno2lFuOFPdlrx7zLXNGjUWzOG0uKUt682Tyrl0YxpwbjDqjFJJLzGa2avX1TDV8u/R0NusLrpIKXDqa7GuJdGO0tRUEo+O/fnO8yJ18e+iNubbW50AAmiAAASQSAAAAAACCSAJAAAAAQAAABDAx2oz4mj157VWb72bnqT4mkLypeL9pyvik/RWP26Pw+PqtKrThvLqFuUKL3l9RZx6zpuveYTRoYeS7iUkz2i2JZrTM+VVHtMpJnpFkSqlVTJ2ilknJLbzT1NZWCk6J7yGe9SUTMeFF26LHUaWI4MnksNQ4FeSdwtx2mbQzPJ+tmlDwx6DOpmt8m/i14s2SPA7/HtvFWf05maNZJSAC5WAAASQSAAAAAACCSAJAAAAAQAAAYDAxWpR4mk1IYnJd7N9v4ZTNM1els1Nrt9pzviWObYtx6beDfpya/K1ctmtSzwqRnH+OO9erJk4mLvrd1KLjB4nFqpSf1470vB8POVtH1GNantJYkns1YPyoVFxTOJMbrEw2W8snGZURQiVYnlZV2VETk8ZGS3aOlTI2im2SmOo09qY2intHmtWjGLnJqMUm5Sb3Jd42aeLu4xKnDrnJ47dmKzJ/wB9pQ1CW4x+jVXXnO8aag06dsnx6NP38/4mXVXM5qK62LR4qtx9p22Dk/SxTj6TYEY7TaWEl3IyR9Ljr00iHJvbqtMgAJogAAEkEgAAAAAAgkgCQAAAAEAAAAAKVeGUa3rNntJrr6n3m0NFld2+URtWLRMT4e1tNZ3DRaE8bnuaLXU9KqOp+V2jUa2PhKT+LrxX+ozOqWDT24rf1rtLW3reZ/efOZsVuPf9OvW8Zq9VfKx0rlNRqS6KrmhVW6VKr73f9Vsz6e5ekx2o6Zb3McV6ak+qa97UXhJGG/2bu6PyK8bj1Uq6yvDPAhEUt4nSO215JyalLUNXpfGWcaq+lSmt/oZTlyvuVudhVz/F/wCp78q3p63DIyadDlHqNT4qwfjLOPXgqrT9YrfG1qdrHrUMOePN+I+VPsZ7VNZoW8c1aiT6oLfOT7EjB0qNe/anWi6NonmNJ7qlfs2vql5pnJe1oy6SW1cVePSVnnD7osytas/77BN6U+3y8iN+EVpqMVGOEksJLckl1IuNEtdqXSPwiavd8p7Knd07WtWUZTaTwsxi3wUmvJydI0+3SSxjG7HhjcbuDxbTPzb/AMU8jNFa9Ff6vLaGEVyEiTsueAAAAABJBIAAAAAAIJIAkAAAABAAAAAARJEkNgY68tVhvxe/csHFuUfOLbUr50aUOkpxexUrQfGed+wuEkivzy848pSnpdlN/QuasM7Tk8fBwa9DfmMhzYc1MaUIXt9HarNKVKhJe9pLinPtn7CGTHW8atCVLzSd1Zu0vcwhPDSnFSW1Fxlh8NzLyFeLM/daan1eoxNbR9/vcr2HIzfC7R3xztvry62++NPMKnf6yoq8vpFo7Goux+o8/k1Xs9ZkniZ6+lnVin/S8lXf0n6SjKsinGyqvsRcUtJk/KfoPa8HPb08nLhr7Wc6z6t/ci5tdOlN5nuXZ1mVtNKisbvxMvQtUjo8f4bWne/dnycuZ7UjTi/ODzRuUZ3lhlyWZ1bdtva7XTfb3FtzTc5sqEoadfyexnYo1p7pUpbkoVM/N7+o73snH+d7mxVdT1CyglVScq9CKwqqXGUV9P2nTY3YISTSa3prKa4Ndx6OH8zPONjZ0y9m852batN7+v4ObfDufmO3xAkAAAAAJIJAAAAAABBJAEgAAAAIAAAAADCcs9Rdvp93cReHToVJRf1sYXtM2ahzsp/mS/x/k+raWQOP8w/J+F1f1bqstv8AJlGpFPenWm3iT7cYbO/61q9C0oTuLiahCCy2+LfYl1t9hxv3O15Sp0tSnUnGCi6EpSnJRSglPealzucufzhddHRk/wAmo5VNb0qk9+aj9i7gOiW3PpZTuI05W9SFJy2encluXBScepHVI04ySksNNJprg0+DR8m8p9Jo0bHSqtOOJ3FCtUrSbztSVRJeGEfTnIGq5aVYSlvbtqWX/CBlJWSPP5Ci9AFnGySKsbdIrgDyoo9YB5nLCz2b2Bp/LLnIsNOqRo1nKpVa2nSopSlGPU5ZaSz2F3yR5cWOoqX5NU9/FZnRqLZqpduOtd6OA6FZR1XlFKNfMoVa9adTDabpwTSWercoouuW/Jm50O/pXVpOSpSlm3qN8HxdKp27l50BsvPTze7DlqtnHCztXNOHGMsr4SOO/j6TbeZjltK+tpW9d5r26ipT66lN7oyff1Mq6VziabfWE41a9OlUlbzjWoVXs4lsPa2c+Us9hzH3PlWS1aUVwlbVNrHDdKOAPpIAAAAAJIJAAAAAABBJAEgAAAAIAAAAAC11OxhXo1KFRZhUhKnNd0lgugB86XfMhqUa0qdGrSlRb3VZVHBuPFbcEt7RZ85XN9R0uwtZKbq16laUatXfGGyqedmMc8M788T6XOOe6S+SWX7+f9Ngcz5bz/QNDj2WdV+ms/wPpTkTSUdNsYrqtqP8iZ8y8sn+haP9jn/WkfT3JJf8Ps/s9H+RAZcAAAAAPFWOU12pr0o9kNgfM3NHJ0+UcYv6V1Tf/l+B9Fa1o9C7oSt7imqlOS3xfU8cYtb0+8+dOTfwPKuMXu/Ta0d/1trHtR9NIDi+r8wlOU3K2u5U4t+RWp9JjuUk02bpzd83tDS4zkputWqJKdZx2Vsr5sVncjdQAAAAAACSCQAAAAAAQSQBIAAAACAAAAAAAADjnuk/kll+/n/TZ2M477pP5JZfaJ/02By/lpTxYaLLts6vqrP8T6b5ISzp9k/+2o/yI+ceXFs/zRoNVcOguab8ekTX3nfubOup6Pp8l/08F545X3AbOAAAAAAAD5h5X5ocqpzxwvbeovCWw/vPp2LPnXn+sJUtVo3aTxVp02n1bdJ4az28DsvIflda39vCVCac4xiqtKW6pCWFnK7M9YGzAIAAAAAAAkgkAAAAAAEEkASAAAAAgAAAAAALDVdYt7aDqXFaFGK66k1H0LiwL8477pFfoll9on/TZ55U8+dGG1TsKTrS4dNVWzTT7VHjLz4NEnpXKDW5dLUjOcY5cHVSo0Y5XCCaWePHeBsOv6LKtyQ0+tBOTtm6jSW/YlOUZPwWTY/c/wDKWFSzlp8pfC0HKcE/nUZPO7wbNKhzf8pqdLoYSkqey49HC6WxsvisZxg13Ral3o2rUJV4OlKEoKrF71KhNraw1x3ewD6yLDXNXo2tvUuq8tmnTjtSeMvuSXW2XNpcxqU4VINSjOMZRkuDi1lM4j7oTlPmVLTKcs4xVuUu3d0cX7fQBW1fn8im1a2jkuCnXqbPn2Y/iYT/AH8ahtZ6C3x2Yn7cmsaGtWs45pWEpbTU1OrYOtLDXVJxeEZ+POFrkVszsqbXZLTmljzIDceTPPlbVJRp3lF27bS6WEukpJ561jK9Z1q2uoVIRqU5KcJJSjOLzGUX1pnyVym1CtdNTlYQoTy3KdvQnT2l2SjwM1zac4VbTKvQ11OdtN+/pvyqUvpwT9aA+jeUGg215RdC5pxqRecZXvovti+KZ846nbXHJ/WYuEnKCanB9VW2lLfGXfuaPovQOUdneU1Utq0Kiay4qS6SPdKPFM5r7o7T4uztbhJbUKzpt9exODftSA6tpd7CvRpV6bzGpCNSPhJZLs+euQ3PFCysaNnVt51XS2oqpGpFe82m0sNdWTZafP7Z/OtK68JQf3gdgBymlz76a/Ko3Ef4Yv8A1F1S579IfHp4+NHPsYHTAc9hzy6K/wDGqLxt5/gZ3k1y60++nKna19ucY7ThKLhJrtW1xA2UkgkAAAAAAEEkICQAAAAEAAAGAB4R83c+/wAvXgABpfJD5dbfvF7T7As/i4fsoACsfPXujPl9t9m/1gAda5q/1NYfuIHAOcP/AJguftVL+WAAH1NZ/FU/2IfyoifWABZ3XB/31Hzvz2fLo/sL2sgAWPNJ+s6fgvYdM90P+rrX7Sv6cgAOIUfil5yyqgAUWQAAOj8wX66j9nr+xAAfTRIAAAAAAAPMQAP/2Q==" alt="avatar"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;额，这是在网上无意间看到的，突然就有了搭建一个静态博客的想法，刚好以后就可以用这个博客来记录自己学到的一些知识（毕竟老年人记忆力）,然后一些板块还没有设置好，以后会慢慢完善，争取……欢迎……关注。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;data:image/jpeg;base6
      
    
    </summary>
    
      <category term="LIFE" scheme="https://weibolu.online/categories/LIFE/"/>
    
    
      <category term="about me" scheme="https://weibolu.online/tags/about-me/"/>
    
  </entry>
  
</feed>
